<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCTuner Pro v6 ‚Äî Optimizador Universal</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        *{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
        html{scroll-behavior:smooth}
        body{font-family:'Inter',system-ui,sans-serif;background:#07090f;min-height:100vh;overflow-x:hidden;color:#c8d6e5}
        .mono{font-family:'JetBrains Mono',monospace}
        ::-webkit-scrollbar{width:5px;height:5px}
        ::-webkit-scrollbar-track{background:transparent}
        ::-webkit-scrollbar-thumb{background:rgba(99,102,241,0.18);border-radius:10px}
        ::-webkit-scrollbar-thumb:hover{background:rgba(99,102,241,0.3)}

        .bg-noise{
            background-image:
                radial-gradient(ellipse 80% 50% at 50% -20%,rgba(99,102,241,0.06),transparent),
                radial-gradient(circle at 80% 80%,rgba(139,92,246,0.025),transparent);
        }

        /* Sidebar */
        .sidebar{
            width:64px;
            background:linear-gradient(180deg,rgba(10,12,20,0.99),rgba(8,10,18,0.98));
            border-right:1px solid rgba(99,102,241,0.04);
            backdrop-filter:blur(20px);
            transition:width 0.3s cubic-bezier(0.4,0,0.2,1);
            display:flex;flex-direction:column;
            z-index:40;
            position:fixed;top:0;left:0;height:100vh;
        }
        .sidebar.expanded{width:240px;box-shadow:4px 0 30px rgba(0,0,0,0.4)}
        .sidebar.expanded .s-text{opacity:1;max-width:180px;margin-left:10px}
        .s-text{opacity:0;max-width:0;overflow:hidden;white-space:nowrap;transition:all 0.25s cubic-bezier(0.4,0,0.2,1);margin-left:0;font-size:12px}
        .nav-btn{
            display:flex;align-items:center;padding:8px 12px;margin:1px 6px;border-radius:8px;
            transition:all 0.15s;cursor:pointer;border:none;background:transparent;
            color:#5a6a84;width:calc(100% - 12px);text-align:left;position:relative;font-size:12px;
        }
        .nav-btn:hover{background:rgba(99,102,241,0.06);color:#a5b4fc}
        .nav-btn.active{background:rgba(99,102,241,0.1);color:#818cf8}
        .nav-btn.active::before{content:'';position:absolute;left:0;top:50%;transform:translateY(-50%);width:3px;height:16px;background:#818cf8;border-radius:0 3px 3px 0}
        .nav-cat{font-size:8px;font-weight:700;letter-spacing:1.8px;text-transform:uppercase;color:#252d3d;padding:14px 18px 4px;transition:all 0.25s}
        .sidebar:not(.expanded) .nav-cat{opacity:0;height:0;padding:0;overflow:hidden}

        .topbar{background:rgba(10,12,20,0.92);backdrop-filter:blur(30px) saturate(1.5);border-bottom:1px solid rgba(99,102,241,0.04);position:relative;z-index:35}

        /* Cards */
        .card{
            background:rgba(12,15,24,0.88);border:1px solid rgba(99,102,241,0.05);border-radius:12px;
            transition:all 0.2s cubic-bezier(0.4,0,0.2,1);position:relative;overflow:hidden;
        }
        .card:hover{border-color:rgba(99,102,241,0.1);transform:translateY(-1px);box-shadow:0 4px 20px rgba(0,0,0,0.12)}
        .card.on{border-color:rgba(99,102,241,0.18);background:rgba(14,17,28,0.95)}
        .card.on::after{content:'';position:absolute;top:-1px;right:-1px;width:6px;height:6px;background:#6366f1;border-radius:50%;box-shadow:0 0 6px 2px rgba(99,102,241,0.3);pointer-events:none}

        /* Toggle */
        .sw{position:relative;width:40px;height:21px;flex-shrink:0;cursor:pointer}
        .sw input{display:none}
        .sw-bg{position:absolute;inset:0;background:#171c2e;border-radius:11px;transition:all 0.25s cubic-bezier(0.4,0,0.2,1);border:1px solid rgba(100,116,139,0.1)}
        .sw input:checked+.sw-bg{background:linear-gradient(135deg,#6366f1,#4f46e5);border-color:#818cf8}
        .sw-dot{position:absolute;top:3px;left:3px;width:15px;height:15px;background:#6b7fa0;border-radius:50%;transition:all 0.25s cubic-bezier(0.68,-0.55,0.27,1.55);pointer-events:none}
        .sw input:checked~.sw-dot{left:22px;background:#fff;box-shadow:0 0 8px rgba(129,140,248,0.3)}

        input[type="range"]{-webkit-appearance:none;height:4px;background:rgba(22,27,42,0.9);border-radius:10px;outline:none;width:100%}
        input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:15px;height:15px;background:linear-gradient(135deg,#6366f1,#818cf8);border-radius:50%;cursor:pointer;box-shadow:0 2px 8px rgba(99,102,241,0.25);transition:transform 0.15s}
        input[type="range"]::-webkit-slider-thumb:hover{transform:scale(1.15)}

        .sel{background:rgba(12,15,24,0.9);border:1px solid rgba(99,102,241,0.08);color:#c8d6e5;appearance:none;border-radius:8px;padding:7px 28px 7px 10px;font-size:11px;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='10' fill='%23818cf8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 8px center;transition:border-color 0.15s;cursor:pointer}
        .sel:focus{outline:none;border-color:#6366f1}

        .kb-input{background:rgba(10,12,20,0.9);border:1px solid rgba(99,102,241,0.1);border-radius:6px;padding:5px 10px;min-width:90px;text-align:center;cursor:pointer;transition:all 0.2s;font-family:'JetBrains Mono',monospace;font-size:10px;color:#fbbf24;font-weight:600}
        .kb-input:focus,.kb-input.rec{border-color:#f59e0b;box-shadow:0 0 10px rgba(245,158,11,0.1);outline:none}

        .btn{font-weight:600;cursor:pointer;transition:all 0.15s;border-radius:8px;border:none;color:white;display:inline-flex;align-items:center;justify-content:center;gap:5px;font-size:11px;position:relative;overflow:hidden}
        .btn:hover{transform:translateY(-1px)}.btn:active{transform:translateY(0)}
        .btn-primary{background:linear-gradient(135deg,#6366f1,#4f46e5);box-shadow:0 2px 10px rgba(99,102,241,0.15)}
        .btn-primary:hover{box-shadow:0 4px 18px rgba(99,102,241,0.25)}
        .btn-success{background:linear-gradient(135deg,#10b981,#059669);box-shadow:0 2px 10px rgba(16,185,129,0.15)}
        .btn-success:hover{box-shadow:0 4px 18px rgba(16,185,129,0.25)}
        .btn-danger{background:linear-gradient(135deg,#ef4444,#dc2626)}
        .btn-amber{background:linear-gradient(135deg,#f59e0b,#d97706)}
        .btn-violet{background:linear-gradient(135deg,#8b5cf6,#7c3aed)}
        .btn-ghost{background:rgba(99,102,241,0.05);color:#a5b4fc;border:1px solid rgba(99,102,241,0.08)}
        .btn-ghost:hover{background:rgba(99,102,241,0.1)}

        .badge{font-size:8px;padding:2px 6px;border-radius:20px;font-weight:600;letter-spacing:0.3px}
        .badge-low{color:#34d399;background:rgba(52,211,153,0.07);border:1px solid rgba(52,211,153,0.1)}
        .badge-med{color:#fbbf24;background:rgba(251,191,36,0.07);border:1px solid rgba(251,191,36,0.1)}
        .badge-high{color:#f87171;background:rgba(248,113,113,0.07);border:1px solid rgba(248,113,113,0.1)}

        @keyframes fadeUp{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
        @keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
        @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.3}}
        @keyframes fadeOut{to{opacity:0;transform:translateY(6px) scale(0.96)}}
        @keyframes floatUp{0%{opacity:0;transform:translateY(0) scale(0)}10%{opacity:0.6}90%{opacity:0.15}100%{opacity:0;transform:translateY(-100vh) scale(1)}}
        @keyframes gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
        @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
        @keyframes rotateGlow{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}
        @keyframes scaleIn{from{opacity:0;transform:scale(0.85)}to{opacity:1;transform:scale(1)}}
        @keyframes borderDance{0%{border-color:rgba(99,102,241,0.2)}33%{border-color:rgba(139,92,246,0.2)}66%{border-color:rgba(236,72,153,0.2)}100%{border-color:rgba(99,102,241,0.2)}}
        @keyframes starTwinkle{0%,100%{opacity:0.1;transform:scale(0.8)}50%{opacity:0.8;transform:scale(1.2)}}
        @keyframes orbFloat{0%{transform:translate(0,0)}25%{transform:translate(10px,-14px)}50%{transform:translate(-6px,-22px)}75%{transform:translate(-12px,-8px)}100%{transform:translate(0,0)}}

        .fade-up{animation:fadeUp 0.2s ease both}
        .spin-slow{animation:spin 3s linear infinite}
        .spin-med{animation:spin 1.5s linear infinite}
        .spin-fast{animation:spin 0.6s linear infinite}
        .pulse-anim{animation:pulse 2s ease infinite}

        .gauge-ring{fill:none;stroke-linecap:round;transition:stroke-dashoffset 0.7s cubic-bezier(0.4,0,0.2,1)}

        .term{background:rgba(6,8,13,0.95);border:1px solid rgba(99,102,241,0.05);border-radius:10px;overflow:hidden}
        .term-head{background:rgba(12,15,24,0.9);padding:7px 12px;display:flex;align-items:center;gap:6px;border-bottom:1px solid rgba(99,102,241,0.04)}
        .term-body{padding:12px;max-height:280px;overflow-y:auto;line-height:1.7;font-size:10px;font-family:'JetBrains Mono',monospace}

        .overlay{background:rgba(0,0,0,0.5);backdrop-filter:blur(8px)}
        .modal{background:linear-gradient(180deg,rgba(12,15,24,0.98),rgba(10,12,20,0.98));border:1px solid rgba(99,102,241,0.07);border-radius:16px;box-shadow:0 20px 50px rgba(0,0,0,0.4)}

        .hw-card{background:linear-gradient(135deg,rgba(99,102,241,0.04),rgba(59,130,246,0.02));border:1px solid rgba(99,102,241,0.08);border-radius:12px}
        .stat{background:rgba(12,15,24,0.5);border:1px solid rgba(99,102,241,0.04);border-radius:10px}
        .fan-box{background:rgba(6,8,13,0.9);border:1px solid rgba(99,102,241,0.05);border-radius:10px}

        .notif-stack{position:fixed;bottom:16px;right:16px;z-index:999;display:flex;flex-direction:column-reverse;gap:6px;pointer-events:none}
        .notif{padding:10px 18px;border-radius:10px;font-size:11px;font-weight:600;color:white;box-shadow:0 6px 20px rgba(0,0,0,0.3);animation:fadeUp 0.2s ease;pointer-events:auto;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.04);max-width:300px}

        .preset-btn{background:rgba(12,15,24,0.5);border:1px solid rgba(99,102,241,0.05);border-radius:10px;padding:10px 14px;cursor:pointer;transition:all 0.2s;text-align:left;width:100%;display:block}
        .preset-btn:hover{border-color:rgba(99,102,241,0.12);background:rgba(99,102,241,0.02);transform:translateX(2px)}

        .particle{position:fixed;pointer-events:none;border-radius:50%;opacity:0;z-index:0}

        .loader-screen{position:fixed;inset:0;z-index:9999;background:#07090f;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity 0.35s,visibility 0.35s}
        .loader-screen.hide{opacity:0;visibility:hidden}
        .loader-bar{width:180px;height:3px;background:rgba(99,102,241,0.06);border-radius:10px;overflow:hidden;margin-top:18px}
        .loader-fill{height:100%;background:linear-gradient(90deg,#6366f1,#818cf8);border-radius:10px;transition:width 0.25s ease;width:0%}

        .score-circle{position:relative;display:inline-flex;align-items:center;justify-content:center}
        .score-circle svg{transform:rotate(-90deg)}
        .score-val{position:absolute;font-size:9px;font-weight:900;color:white}

        .stagger>*{opacity:0;animation:fadeUp 0.25s ease both}
        .stagger>*:nth-child(1){animation-delay:0.02s}.stagger>*:nth-child(2){animation-delay:0.04s}.stagger>*:nth-child(3){animation-delay:0.06s}.stagger>*:nth-child(4){animation-delay:0.08s}.stagger>*:nth-child(5){animation-delay:0.1s}.stagger>*:nth-child(6){animation-delay:0.12s}.stagger>*:nth-child(7){animation-delay:0.14s}.stagger>*:nth-child(8){animation-delay:0.16s}.stagger>*:nth-child(9){animation-delay:0.18s}.stagger>*:nth-child(10){animation-delay:0.2s}.stagger>*:nth-child(11){animation-delay:0.22s}.stagger>*:nth-child(12){animation-delay:0.24s}

        .status-bar{background:rgba(6,8,13,0.92);border-top:1px solid rgba(99,102,241,0.03);backdrop-filter:blur(20px)}

        @keyframes tagGlow{0%,100%{box-shadow:0 0 4px rgba(99,102,241,0.06)}50%{box-shadow:0 0 10px rgba(99,102,241,0.15)}}
        .v-tag{animation:tagGlow 3s ease infinite}
        pre{white-space:pre-wrap;word-wrap:break-word}

        @media(max-width:768px){
            .sidebar{transform:translateX(-100%);z-index:50}
            .sidebar.mob{transform:translateX(0);width:240px;box-shadow:4px 0 40px rgba(0,0,0,0.6)}
            .sidebar.mob .s-text{opacity:1;max-width:180px;margin-left:10px}
            .sidebar.mob .nav-cat{opacity:1;height:auto;padding:14px 18px 4px}
            main{margin-left:0!important}
            .status-bar{left:0!important}
        }
        .section-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(290px,1fr));gap:8px}
        @media(max-width:640px){.section-grid{grid-template-columns:1fr}}

        /* Search */
        .search-overlay{position:fixed;inset:0;z-index:200;background:rgba(0,0,0,0.45);backdrop-filter:blur(6px);display:none;align-items:flex-start;justify-content:center;padding-top:12vh}
        .search-overlay.show{display:flex}
        .search-box{width:100%;max-width:480px;background:rgba(12,15,24,0.98);border:1px solid rgba(99,102,241,0.1);border-radius:14px;box-shadow:0 20px 50px rgba(0,0,0,0.4);overflow:hidden;animation:fadeUp 0.15s ease}
        .search-input{width:100%;background:transparent;border:none;padding:14px 18px;color:white;font-size:14px;outline:none;font-family:'Inter',sans-serif}
        .search-input::placeholder{color:#2d3a4f}
        .search-results{max-height:300px;overflow-y:auto;border-top:1px solid rgba(99,102,241,0.05)}
        .search-item{padding:9px 18px;cursor:pointer;display:flex;align-items:center;gap:9px;transition:background 0.1s;border-bottom:1px solid rgba(99,102,241,0.02)}
        .search-item:hover{background:rgba(99,102,241,0.06)}
        .search-item .s-icon{font-size:14px;width:22px;text-align:center}
        .search-item .s-name{font-size:11px;font-weight:600;color:#c8d6e5}
        .search-item .s-cat{font-size:9px;color:#3d4a5f;margin-left:auto}

        /* Credits */
        .credit-gradient{background:linear-gradient(135deg,#6366f1,#8b5cf6,#ec4899,#6366f1);background-size:300% 300%;animation:gradientShift 5s ease infinite;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
        .credit-avatar{animation:float 3.5s ease-in-out infinite;position:relative}
        .credit-avatar::after{content:'';position:absolute;inset:-4px;border-radius:inherit;background:conic-gradient(from 0deg,#6366f1,#8b5cf6,#ec4899,#3b82f6,#6366f1);animation:rotateGlow 3.5s linear infinite;z-index:-1;opacity:0.35;filter:blur(8px)}
        .credit-card-anim{animation:scaleIn 0.4s cubic-bezier(0.34,1.56,0.64,1) both}
        .credit-card-anim:nth-child(2){animation-delay:0.06s}.credit-card-anim:nth-child(3){animation-delay:0.12s}.credit-card-anim:nth-child(4){animation-delay:0.18s}
        .orb{position:absolute;border-radius:50%;pointer-events:none;animation:orbFloat 7s ease-in-out infinite}
        .orb-1{width:80px;height:80px;background:radial-gradient(circle,rgba(99,102,241,0.05),transparent);top:8%;right:5%;animation-delay:-1.5s}
        .orb-2{width:60px;height:60px;background:radial-gradient(circle,rgba(139,92,246,0.04),transparent);bottom:18%;left:6%;animation-delay:-3.5s}
        .tech-badge{display:inline-flex;align-items:center;gap:3px;padding:3px 8px;border-radius:14px;font-size:9px;font-weight:600;border:1px solid;animation:borderDance 3.5s ease infinite;transition:all 0.2s;cursor:default}
        .tech-badge:hover{transform:translateY(-1px)}
        .star{position:absolute;width:2px;height:2px;background:white;border-radius:50%;animation:starTwinkle 2s ease-in-out infinite;pointer-events:none}
        .timeline-line{position:absolute;left:14px;top:20px;bottom:0;width:2px;background:linear-gradient(to bottom,rgba(99,102,241,0.2),rgba(139,92,246,0.06),transparent)}
        .timeline-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;background:linear-gradient(135deg,#6366f1,#8b5cf6);box-shadow:0 0 6px rgba(99,102,241,0.3);position:relative;z-index:1}
        .hover-glow:hover{box-shadow:0 0 20px rgba(99,102,241,0.08),0 6px 20px rgba(0,0,0,0.2);border-color:rgba(99,102,241,0.15)!important}

        .qa-btn{background:rgba(12,15,24,0.6);border:1px solid rgba(99,102,241,0.05);border-radius:10px;padding:12px;text-align:center;cursor:pointer;transition:all 0.2s}
        .qa-btn:hover{border-color:rgba(99,102,241,0.12);transform:translateY(-2px);box-shadow:0 4px 14px rgba(0,0,0,0.12)}

        .ripple{position:absolute;border-radius:50%;background:rgba(255,255,255,0.08);transform:scale(0);animation:rippleAnim 0.45s ease-out forwards;pointer-events:none}
        @keyframes rippleAnim{to{transform:scale(4);opacity:0}}
    </style>
</head>
<body class="bg-noise">

<!-- LOADER -->
<div id="loaderScreen" class="loader-screen">
    <div class="w-12 h-12 bg-gradient-to-br from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center text-base font-black text-white mb-4 shadow-xl shadow-indigo-500/20">PC</div>
    <div class="loader-bar"><div class="loader-fill" id="loaderFill"></div></div>
    <p class="text-[10px] text-indigo-400 font-semibold tracking-[1.5px] mt-3" id="loaderTxt">INICIANDO</p>
    <p class="text-[8px] text-slate-700 mt-0.5" id="loaderSub">Preparando...</p>
    <p class="text-[8px] text-slate-800 mt-6 tracking-[2px]">by <span class="text-indigo-500/40 font-semibold">mueblesito</span></p>
</div>

<div id="particles" class="fixed inset-0 pointer-events-none z-0"></div>

<!-- SEARCH -->
<div id="searchOverlay" class="search-overlay" onclick="if(event.target===this)closeSearch()">
    <div class="search-box">
        <div class="flex items-center gap-2.5 px-4 pt-1">
            <svg width="14" height="14" fill="none" stroke="#6366f1" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
            <input type="text" class="search-input" id="searchInput" placeholder="Buscar opciones..." oninput="onSearch(this.value)" autocomplete="off">
            <kbd class="text-[8px] text-slate-600 bg-slate-800/50 px-1.5 py-0.5 rounded border border-slate-700/20 font-mono">ESC</kbd>
        </div>
        <div class="search-results" id="searchResults"></div>
    </div>
</div>

<!-- MOB MENU -->
<button id="mobMenuBtn" class="md:hidden fixed top-3 left-3 z-[60] p-2 rounded-lg bg-slate-800/90 border border-slate-700/40 text-white cursor-pointer" onclick="document.getElementById('sb').classList.toggle('mob');document.getElementById('sbBackdrop').classList.toggle('hidden')">
    <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="3" y1="4" x2="13" y2="4"/><line x1="3" y1="8" x2="13" y2="8"/><line x1="3" y1="12" x2="13" y2="12"/></svg>
</button>

<!-- SIDEBAR BACKDROP (mobile) -->
<div id="sbBackdrop" class="fixed inset-0 bg-black/40 z-[39] hidden md:hidden" onclick="document.getElementById('sb').classList.remove('mob');this.classList.add('hidden')"></div>

<!-- SIDEBAR -->
<aside id="sb" class="sidebar h-screen">
    <div class="p-3.5 flex items-center justify-between border-b border-white/[0.02] min-h-[52px]">
        <div class="flex items-center">
            <div class="w-8 h-8 bg-gradient-to-br from-indigo-500 to-violet-600 rounded-lg flex items-center justify-center text-[10px] font-black text-white flex-shrink-0 shadow-lg shadow-indigo-500/15 cursor-pointer hover:scale-105 transition-transform" onclick="go('credits')" title="by mueblesito">PC</div>
            <div class="s-text">
                <h1 class="font-extrabold text-white text-[13px] leading-tight">PCTuner</h1>
                <p class="text-[7px] font-bold text-indigo-400 tracking-[2px] mt-0.5 v-tag">PRO v6</p>
            </div>
        </div>
        <button onclick="toggleSidebar()" class="s-text w-5 h-5 flex items-center justify-center rounded-md hover:bg-white/5 text-slate-600 hover:text-white transition-colors cursor-pointer" title="Colapsar">
            <svg width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
        </button>
    </div>
    <nav class="flex-1 overflow-y-auto py-1.5" id="nav"></nav>
    <div class="p-2.5 border-t border-white/[0.02]">
        <button onclick="openSearch()" class="w-full nav-btn justify-center gap-1.5 text-[9px] !text-slate-600 hover:!text-indigo-400 !p-1.5">
            <svg width="11" height="11" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
            <span class="s-text text-[9px]">Ctrl+K</span>
        </button>
        <button onclick="toggleSidebar()" class="w-full nav-btn justify-center gap-1.5 text-[9px] !text-slate-600 hover:!text-indigo-400 !p-1.5" id="expandBtn">
            <svg width="11" height="11" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 18l6-6-6-6"/></svg>
            <span class="s-text text-[9px]">Colapsar</span>
        </button>
        <div class="flex items-center gap-1.5 px-2 mt-1">
            <span class="w-1.5 h-1.5 bg-emerald-400 rounded-full pulse-anim flex-shrink-0"></span>
            <span class="s-text text-[8px] text-slate-600" id="sbStatus">Detectando...</span>
        </div>
    </div>
</aside>

<!-- MAIN -->
<main style="margin-left:64px;transition:margin-left 0.3s cubic-bezier(0.4,0,0.2,1)" class="min-h-screen relative z-10">
    <header class="topbar sticky top-0 z-30 px-4 py-2.5 flex items-center justify-between">
        <div class="flex items-center gap-2 ml-7 md:ml-0">
            <h2 id="pTitle" class="text-[13px] font-bold text-white">Cargando...</h2>
            <span id="pBadge" class="text-[8px] bg-indigo-500/8 text-indigo-400 px-2 py-0.5 rounded-full border border-indigo-500/8 font-medium">‚Äî</span>
        </div>
        <div class="flex items-center gap-1.5">
            <div id="perfScore" class="hidden md:flex items-center gap-1 bg-emerald-500/5 border border-emerald-500/8 rounded-full px-2 py-0.5 cursor-pointer" onclick="go('monitor')">
                <div class="score-circle"><svg width="22" height="22" viewBox="0 0 36 36"><circle cx="18" cy="18" r="14" fill="none" stroke="rgba(16,185,129,0.1)" stroke-width="2.5"/><circle cx="18" cy="18" r="14" fill="none" stroke="#10b981" stroke-width="2.5" stroke-dasharray="88" stroke-dashoffset="22" stroke-linecap="round" id="scoreRing"/></svg><span class="score-val text-[8px] text-emerald-400" id="scoreVal">75</span></div>
            </div>
            <span id="clock" class="hidden md:block text-[9px] mono text-slate-600 bg-slate-800/25 px-1.5 py-0.5 rounded-full"></span>
            <span id="cBadge" class="text-[8px] mono text-amber-400 bg-amber-500/6 px-1.5 py-0.5 rounded-full border border-amber-500/8 hidden font-semibold"></span>
            <button onclick="openExec()" class="btn btn-success px-3 py-1.5 text-[10px]">
                <svg width="10" height="10" fill="currentColor" viewBox="0 0 16 16"><path d="M4 2l10 6-10 6z"/></svg>
                <span class="hidden sm:inline">Ejecutar</span>
            </button>
            <button onclick="openExport()" class="btn btn-primary px-3 py-1.5 text-[10px]">
                <svg width="10" height="10" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M12 5v14M5 12l7 7 7-7"/></svg>
                <span class="hidden sm:inline">Exportar</span>
            </button>
        </div>
    </header>
    <div class="p-3.5 md:p-4 max-w-[1340px] mx-auto pb-16" id="content"></div>
    <footer class="status-bar fixed bottom-0 right-0 z-20 px-3 py-1 flex items-center justify-between text-[8px] text-slate-700" style="left:64px;transition:left 0.3s cubic-bezier(0.4,0,0.2,1)">
        <div class="flex items-center gap-2.5">
            <span class="flex items-center gap-1"><span class="w-1 h-1 bg-emerald-500 rounded-full pulse-anim"></span>Activo</span>
            <span id="sbHw" class="hidden md:inline">‚Äî</span>
        </div>
        <div class="flex items-center gap-2.5">
            <span id="sbChanges">0 cambios</span>
            <span>üõ°Ô∏è Defender OK</span>
            <span class="text-indigo-400/50 font-semibold cursor-pointer hover:text-indigo-300 transition-colors" onclick="go('credits')">PCTuner Pro v6 ¬∑ mueblesito</span>
        </div>
    </footer>
</main>

<div class="notif-stack" id="notifStack"></div>

<!-- EXEC MODAL -->
<div id="execModal" class="fixed inset-0 z-[100] hidden">
    <div class="overlay absolute inset-0" onclick="closeExec()"></div>
    <div class="relative z-10 flex items-center justify-center min-h-screen p-4">
        <div class="modal w-full max-w-lg fade-up">
            <div class="flex items-center justify-between px-4 py-3 border-b border-white/[0.03]">
                <div class="flex items-center gap-2"><div class="flex gap-1.5"><div class="w-2.5 h-2.5 bg-red-500 rounded-full cursor-pointer hover:brightness-125" onclick="closeExec()"></div><div class="w-2.5 h-2.5 bg-yellow-500 rounded-full"></div><div class="w-2.5 h-2.5 bg-green-500 rounded-full"></div></div><span class="text-xs text-slate-300 font-semibold ml-1">Ejecutar</span></div>
            </div>
            <div id="execBody" class="p-4 max-h-[60vh] overflow-y-auto"></div>
        </div>
    </div>
</div>

<!-- EXPORT MODAL -->
<div id="exportModal" class="fixed inset-0 z-[100] hidden">
    <div class="overlay absolute inset-0" onclick="closeExport()"></div>
    <div class="relative z-10 flex items-center justify-center min-h-screen p-4">
        <div class="modal w-full max-w-xl max-h-[75vh] overflow-hidden flex flex-col fade-up">
            <div class="flex items-center justify-between px-4 py-3 border-b border-white/[0.03]">
                <div class="flex items-center gap-2"><div class="flex gap-1.5"><div class="w-2.5 h-2.5 bg-red-500 rounded-full cursor-pointer hover:brightness-125" onclick="closeExport()"></div><div class="w-2.5 h-2.5 bg-yellow-500 rounded-full"></div><div class="w-2.5 h-2.5 bg-green-500 rounded-full"></div></div><span class="text-xs text-slate-300 font-semibold ml-1" id="expTitle">Exportar Script</span></div>
                <div class="flex gap-1.5">
                    <select id="expFmt" class="sel text-[10px]"><option value="bat">.BAT</option><option value="ps1">.PS1</option><option value="reg">.REG</option><option value="ahk">.AHK</option></select>
                    <button onclick="genScript()" class="btn btn-primary px-3 py-1.5 text-[10px]">‚ö° Generar</button>
                </div>
            </div>
            <div id="expBody" class="flex-1 overflow-auto"><div class="p-5 text-center text-slate-600"><p class="text-2xl mb-1.5">üì¶</p><p class="text-[11px]">Selecciona formato y clic en <strong class="text-indigo-400">Generar</strong></p></div></div>
            <div id="expFoot" class="px-4 py-2.5 border-t border-white/[0.03] flex justify-between items-center hidden">
                <span class="text-[9px] text-slate-600 mono" id="expInfo"></span>
                <div class="flex gap-1.5">
                    <button onclick="copyCode()" id="copyBtn" class="btn btn-primary px-3 py-1.5 text-[10px]">üìã Copiar</button>
                    <button onclick="dlCode()" class="btn btn-success px-3 py-1.5 text-[10px]">‚¨á Descargar</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// ===== SIDEBAR TOGGLE =====
function toggleSidebar(){
    const sb=document.getElementById('sb');
    const main=document.querySelector('main');
    const footer=document.querySelector('.status-bar');
    if(sb.classList.contains('expanded')){
        sb.classList.remove('expanded');
        main.style.marginLeft='64px';
        if(footer)footer.style.left='64px';
    }else{
        sb.classList.add('expanded');
        main.style.marginLeft='240px';
        if(footer)footer.style.left='240px';
    }
}

// ===== STATE =====
const S={page:'dashboard',hw:{platform:'',os:'',osVer:'',arch:'',cores:0,ram:0,gpu:'',brand:'',model:'',battery:false,batteryLevel:0,charging:false,connection:'',screenW:0,screenH:0,dpr:1,lang:'',userAgent:'',touch:false,dark:false},toggles:{},sliders:{},selects:{},keybinds:{},fan:{curve:[{t:30,s:10},{t:45,s:25},{t:60,s:50},{t:75,s:80},{t:90,s:100}],profile:'balanced'},changes:{},mon:{cpu:0,ram:0,temp:0,rpm:0,disk:0,up:'0h 0m',net:0},hist:{cpu:[],ram:[],temp:[]}};
let cCount=0,_code='',_fn='';

// ===== LOADER =====
let _ls=0;const _lt=['Detectando hardware...','Analizando GPU...','Verificando Defender...','Cargando m√≥dulos...','Preparando interfaz...','¬°Listo!'];
function animL(){if(_ls>=_lt.length)return;const f=document.getElementById('loaderFill'),t=document.getElementById('loaderSub');if(f)f.style.width=Math.min(100,(_ls+1)/_lt.length*100)+'%';if(t)t.textContent=_lt[_ls];_ls++;if(_ls<_lt.length)setTimeout(animL,100);}
setTimeout(animL,80);

// ===== HW DETECT =====
async function detectHW(){const u=navigator.userAgent;S.hw.userAgent=u;S.hw.lang=navigator.language;S.hw.screenW=screen.width;S.hw.screenH=screen.height;S.hw.dpr=devicePixelRatio||1;S.hw.touch='ontouchstart'in window;S.hw.dark=matchMedia('(prefers-color-scheme:dark)').matches;S.hw.cores=navigator.hardwareConcurrency||1;S.hw.ram=navigator.deviceMemory||0;
if(u.includes('Windows NT 10.0')){S.hw.os='Windows';S.hw.osVer='10/11';if(navigator.userAgentData){try{const d=await navigator.userAgentData.getHighEntropyValues(['platformVersion','architecture','model','platform']);S.hw.platform=d.platform||'Windows';S.hw.arch=d.architecture||'x86';if(d.platformVersion){const v=parseInt(d.platformVersion.split('.')[0]);S.hw.osVer=v>=13?'11':'10';}if(d.model)S.hw.model=d.model;}catch(e){}}}else if(u.includes('Mac OS'))S.hw.os='macOS',S.hw.osVer=u.match(/Mac OS X ([\d_]+)/)?.[1]?.replace(/_/g,'.')||'';else if(u.includes('Linux'))S.hw.os='Linux';else if(u.includes('Android'))S.hw.os='Android';else if(u.includes('iPhone')||u.includes('iPad'))S.hw.os='iOS';else S.hw.os='Otro';
if(u.includes('Win64')||u.includes('x64')||u.includes('WOW64'))S.hw.arch='x64';else if(u.includes('ARM'))S.hw.arch='ARM';else if(!S.hw.arch)S.hw.arch='x86';
const br=[[/Lenovo/i,'Lenovo'],[/ASUS|ROG/i,'ASUS'],[/Acer/i,'Acer'],[/Dell/i,'Dell'],[/HP|Hewlett/i,'HP'],[/MSI/i,'MSI'],[/Samsung/i,'Samsung'],[/Apple/i,'Apple'],[/Huawei/i,'Huawei'],[/Surface/i,'Microsoft'],[/Razer/i,'Razer'],[/Xiaomi/i,'Xiaomi']];for(const[r,n]of br)if(r.test(u)){S.hw.brand=n;break;}if(!S.hw.brand)S.hw.brand='PC';
try{const c=document.createElement('canvas'),gl=c.getContext('webgl')||c.getContext('experimental-webgl');if(gl){const x=gl.getExtension('WEBGL_debug_renderer_info');if(x){S.hw.gpu=gl.getParameter(x.UNMASKED_RENDERER_WEBGL)||'';const v=gl.getParameter(x.UNMASKED_VENDOR_WEBGL)||'';if(S.hw.brand==='PC')for(const[r,n]of br)if(r.test(S.hw.gpu)||r.test(v)){S.hw.brand=n;break;}}}}catch(e){}
if(navigator.getBattery)try{const b=await navigator.getBattery();S.hw.battery=true;S.hw.batteryLevel=Math.round(b.level*100);S.hw.charging=b.charging;b.onlevelchange=()=>S.hw.batteryLevel=Math.round(b.level*100);b.onchargingchange=()=>S.hw.charging=b.charging;}catch(e){}
if(navigator.connection)S.hw.connection=navigator.connection.effectiveType||'';
document.getElementById('sbStatus').textContent=S.hw.brand+' ¬∑ '+S.hw.os;}

// ===== NAV =====
const NAV=[{c:'Principal',i:[{id:'dashboard',ic:'üè†',n:'Dashboard'},{id:'monitor',ic:'üìä',n:'Monitor'},{id:'fans',ic:'üåÄ',n:'Ventiladores'}]},{c:'Optimizaci√≥n',i:[{id:'performance',ic:'‚ö°',n:'Rendimiento'},{id:'cleanup',ic:'üßπ',n:'Limpieza'},{id:'network',ic:'üåê',n:'Red'},{id:'power',ic:'üîã',n:'Energ√≠a'},{id:'startup',ic:'üöÄ',n:'Arranque'},{id:'gaming',ic:'üéÆ',n:'Gaming'}]},{c:'Personalizaci√≥n',i:[{id:'keybinds',ic:'‚å®Ô∏è',n:'Keybinds'},{id:'visual',ic:'üé®',n:'Visual'},{id:'taskbar',ic:'üìå',n:'Taskbar'},{id:'explorer',ic:'üìÅ',n:'Explorador'},{id:'sound',ic:'üîä',n:'Sonido'}]},{c:'Sistema',i:[{id:'privacy',ic:'üõ°Ô∏è',n:'Privacidad'},{id:'services',ic:'‚öôÔ∏è',n:'Servicios'},{id:'updates',ic:'üîÑ',n:'Updates'},{id:'security',ic:'üîí',n:'Seguridad'},{id:'maintenance',ic:'üîß',n:'Mantenimiento'}]},{c:'Herramientas',i:[{id:'terminal',ic:'üíª',n:'Terminal'},{id:'profiles',ic:'üíæ',n:'Perfiles'},{id:'makeapp',ic:'üì¶',n:'Crear App'},{id:'about',ic:'‚ÑπÔ∏è',n:'Info'},{id:'credits',ic:'‚ú®',n:'Cr√©ditos'}]}];
const META={dashboard:{t:'Dashboard',b:'Centro de Control'},monitor:{t:'Monitor',b:'Tiempo Real'},fans:{t:'Ventiladores',b:'Control RPM'},performance:{t:'Rendimiento',b:'CPU ¬∑ RAM'},cleanup:{t:'Limpieza',b:'Temp ¬∑ Cach√©'},network:{t:'Red',b:'DNS ¬∑ WiFi'},power:{t:'Energ√≠a',b:'Plan'},startup:{t:'Arranque',b:'Inicio'},gaming:{t:'Gaming',b:'FPS'},keybinds:{t:'Keybinds',b:'Atajos'},visual:{t:'Visual',b:'Tema'},taskbar:{t:'Taskbar',b:'Barra'},explorer:{t:'Explorador',b:'Archivos'},sound:{t:'Sonido',b:'Audio'},privacy:{t:'Privacidad',b:'Telemetr√≠a'},services:{t:'Servicios',b:'Windows'},updates:{t:'Updates',b:'Config'},security:{t:'Seguridad',b:'Firewall'},maintenance:{t:'Mantenimiento',b:'Reparar'},terminal:{t:'Terminal',b:'CMD'},profiles:{t:'Perfiles',b:'Guardar'},makeapp:{t:'Crear App',b:'üì¶ .EXE'},about:{t:'Acerca de',b:'v6.0'},credits:{t:'Cr√©ditos',b:'‚ú® mueblesito'}};

// Search
const SEARCH_ITEMS=[];
function buildSearchIndex(){SEARCH_ITEMS.length=0;NAV.forEach(c=>c.i.forEach(i=>SEARCH_ITEMS.push({id:i.id,ic:i.ic,n:i.n,cat:c.c})));}
function openSearch(){document.getElementById('searchOverlay').classList.add('show');document.getElementById('searchInput').value='';document.getElementById('searchInput').focus();onSearch('');}
function closeSearch(){document.getElementById('searchOverlay').classList.remove('show');}
function onSearch(q){const r=document.getElementById('searchResults');const items=q?SEARCH_ITEMS.filter(i=>i.n.toLowerCase().includes(q.toLowerCase())||i.cat.toLowerCase().includes(q.toLowerCase())):SEARCH_ITEMS;r.innerHTML=items.map(i=>`<div class="search-item" onclick="go('${i.id}');closeSearch()"><span class="s-icon">${i.ic}</span><span class="s-name">${i.n}</span><span class="s-cat">${i.cat}</span></div>`).join('');}

function buildNav(){let h='';NAV.forEach(c=>{h+=`<div class="nav-cat">${c.c}</div>`;c.i.forEach(i=>{h+=`<button class="nav-btn" data-id="${i.id}" onclick="go('${i.id}')"><span class="text-center text-sm w-5">${i.ic}</span><span class="s-text">${i.n}</span></button>`;});});document.getElementById('nav').innerHTML=h;}

function go(id){S.page=id;document.querySelectorAll('.nav-btn').forEach(b=>b.classList.toggle('active',b.dataset.id===id));const m=META[id]||{t:id,b:''};document.getElementById('pTitle').textContent=m.t;document.getElementById('pBadge').textContent=m.b;render(id);document.getElementById('sb').classList.remove('mob');const bd=document.getElementById('sbBackdrop');if(bd)bd.classList.add('hidden');scrollTo({top:0,behavior:'smooth'});}

function track(k,v){S.changes[k]=v;cCount=Object.keys(S.changes).length;const b=document.getElementById('cBadge');if(cCount>0){b.classList.remove('hidden');b.textContent=cCount;}else b.classList.add('hidden');updScore();updStatusBar();}

function T(id){return S.toggles[id]}
function SE(id){return S.selects[id]}

// ===== UI BUILDERS =====
function tog(id,label,desc,def=false,risk='low'){const c=S.toggles[id]!==undefined?S.toggles[id]:def;if(S.toggles[id]===undefined)S.toggles[id]=def;const rc={low:'badge-low',med:'badge-med',high:'badge-high'},rl={low:'seguro',med:'medio',high:'riesgo'};return`<div class="card p-3" id="c-${id}" ${c?'style="border-color:rgba(99,102,241,0.18)"':''}><div class="flex items-center justify-between gap-2"><div class="flex-1 min-w-0"><div class="flex items-center gap-1.5 flex-wrap mb-0.5"><span class="font-semibold text-white text-[11px]">${label}</span><span class="badge ${rc[risk]}">${rl[risk]}</span></div><p class="text-[9px] text-slate-500 leading-relaxed">${desc}</p></div><label class="sw"><input type="checkbox" ${c?'checked':''} onchange="onTog('${id}',this.checked)"><div class="sw-bg"></div><div class="sw-dot"></div></label></div></div>`;}
function sli(id,label,desc,min,max,def,unit=''){const v=S.sliders[id]!==undefined?S.sliders[id]:def;if(S.sliders[id]===undefined)S.sliders[id]=def;return`<div class="card p-3"><div class="flex items-center justify-between mb-0.5"><span class="font-semibold text-white text-[11px]">${label}</span><span class="mono text-indigo-400 text-[10px] font-semibold" id="sv-${id}">${v}${unit}</span></div><p class="text-[9px] text-slate-500 mb-2">${desc}</p><input type="range" min="${min}" max="${max}" value="${v}" oninput="onSli('${id}',this.value,'${unit}')"></div>`;}
function sel(id,label,desc,opts,def){const v=S.selects[id]!==undefined?S.selects[id]:def;if(S.selects[id]===undefined)S.selects[id]=def;return`<div class="card p-3"><div class="flex items-center justify-between flex-wrap gap-2"><div class="flex-1 min-w-0"><span class="font-semibold text-white text-[11px]">${label}</span><p class="text-[9px] text-slate-500 mt-0.5">${desc}</p></div><select class="sel" onchange="onSel('${id}',this.value)">${opts.map(x=>`<option value="${x.v}" ${v===x.v?'selected':''}>${x.l}</option>`).join('')}</select></div></div>`;}
function kb(id,label,desc,def){const v=S.keybinds[id]||def;if(!S.keybinds[id])S.keybinds[id]=def;return`<div class="card p-3"><div class="flex items-center justify-between gap-2"><div class="flex-1 min-w-0"><span class="font-semibold text-white text-[11px]">${label}</span><p class="text-[9px] text-slate-500 mt-0.5">${desc}</p></div><div class="flex items-center gap-1"><input type="text" readonly class="kb-input" value="${v}" id="kb-${id}" onclick="recStart('${id}',this)"><button onclick="recReset('${id}','${def}')" class="text-slate-600 hover:text-red-400 text-[9px] cursor-pointer p-0.5 rounded hover:bg-red-500/5 transition-colors">‚Ü∫</button></div></div></div>`;}
function hdr(icon,title,desc){return`<div class="mb-3 fade-up"><h3 class="text-base font-bold text-white flex items-center gap-2">${icon}<span>${title}</span></h3><p class="text-[9px] text-slate-500 mt-0.5 ml-7">${desc}</p></div>`;}
function divider(t){return`<div class="mt-5 mb-3 flex items-center gap-2"><div class="h-px flex-1 bg-gradient-to-r from-transparent via-slate-800/40 to-transparent"></div><span class="text-[7px] font-bold text-slate-700 tracking-[2px] uppercase">${t}</span><div class="h-px flex-1 bg-gradient-to-r from-transparent via-slate-800/40 to-transparent"></div></div>`;}
function grid(c){return`<div class="section-grid stagger">${c}</div>`;}

function onTog(id,c){S.toggles[id]=c;track(id,c);const el=document.getElementById('c-'+id);if(el)el.style.borderColor=c?'rgba(99,102,241,0.18)':'rgba(99,102,241,0.05)';}
function onSli(id,v,u){S.sliders[id]=parseInt(v);track(id,v);const e=document.getElementById('sv-'+id);if(e)e.textContent=v+u;}
function onSel(id,v){S.selects[id]=v;track(id,v);}

let _recId=null,_recEl=null;
function recStart(id,el){if(_recEl){_recEl.classList.remove('rec');_recEl.value=S.keybinds[_recId]||'';}_recId=id;_recEl=el;el.classList.add('rec');el.value='‚è∫ Presiona...';}
function recReset(id,def){S.keybinds[id]=def;const e=document.getElementById('kb-'+id);if(e){e.value=def;e.classList.remove('rec');}track('kb_'+id,def);}
document.addEventListener('keydown',e=>{if(!_recId)return;e.preventDefault();let k=[];if(e.ctrlKey)k.push('Ctrl');if(e.altKey)k.push('Alt');if(e.shiftKey)k.push('Shift');if(e.metaKey)k.push('Win');const key=e.key;if(!['Control','Alt','Shift','Meta'].includes(key))k.push(key.length===1?key.toUpperCase():key);const c=k.join(' + ');if(c&&!['Ctrl','Alt','Shift','Win'].includes(c)){S.keybinds[_recId]=c;_recEl.value=c;_recEl.classList.remove('rec');track('kb_'+_recId,c);_recId=null;_recEl=null;}});

// ===== GAUGES =====
function gauge(pct,color,label,value,sz=100){const r=38,circ=2*Math.PI*r,off=circ-(Math.min(pct,100)/100)*circ;return`<div class="flex flex-col items-center"><svg width="${sz}" height="${sz}" viewBox="0 0 100 100"><circle cx="50" cy="50" r="${r}" fill="none" stroke="rgba(99,102,241,0.03)" stroke-width="3.5"/><circle cx="50" cy="50" r="${r}" class="gauge-ring" stroke="${color}" stroke-width="3.5" stroke-dasharray="${circ}" stroke-dashoffset="${off}" transform="rotate(-90 50 50)"/><text x="50" y="45" text-anchor="middle" fill="white" font-size="14" font-weight="800" font-family="Inter">${value}</text><text x="50" y="58" text-anchor="middle" fill="#4a5568" font-size="7" font-family="Inter">${label}</text></svg></div>`;}
function miniChart(data,color,w=110,h=32){if(!data.length)return'';const max=Math.max(...data,1),pts=data.map((v,i)=>`${(i/(data.length-1))*w},${h-((v/max)*h*0.8+h*0.05)}`).join(' ');return`<svg width="${w}" height="${h}" class="opacity-50"><polyline points="${pts}" fill="none" stroke="${color}" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/><polyline points="0,${h} ${pts} ${w},${h}" fill="${color}" opacity="0.05"/></svg>`;}

// ===== MONITOR SIM =====
function simMon(){const m=S.mon;m.cpu=Math.round(10+Math.random()*50);m.ram=Math.round(35+Math.random()*35);m.temp=Math.round(35+Math.random()*28);m.disk=Math.round(2+Math.random()*20);m.net=Math.round(Math.random()*60*10)/10;const b={silent:1200,balanced:2400,performance:3800,custom:2800};m.rpm=(b[S.fan.profile]||2400)+Math.round(Math.random()*500-250);m.up=Math.floor(Math.random()*72)+'h '+Math.floor(Math.random()*60)+'m';S.hist.cpu.push(m.cpu);S.hist.ram.push(m.ram);S.hist.temp.push(m.temp);if(S.hist.cpu.length>30)S.hist.cpu.shift();if(S.hist.ram.length>30)S.hist.ram.shift();if(S.hist.temp.length>30)S.hist.temp.shift();if(S.page==='monitor')updMon();if(S.page==='fans')updFanLive();if(S.page==='dashboard')updDash();}

function updMon(){const m=S.mon;['cpu','ram','temp','disk'].forEach(k=>{const el=document.getElementById('m-'+k);if(!el)return;const d={cpu:{p:m.cpu,c:m.cpu>80?'#ef4444':m.cpu>50?'#f59e0b':'#10b981',l:'CPU',v:m.cpu+'%'},ram:{p:m.ram,c:m.ram>85?'#ef4444':m.ram>60?'#f59e0b':'#6366f1',l:'RAM',v:m.ram+'%'},temp:{p:m.temp,c:m.temp>75?'#ef4444':m.temp>55?'#f59e0b':'#10b981',l:'TEMP',v:m.temp+'¬∞C'},disk:{p:m.disk,c:'#8b5cf6',l:'DISCO',v:m.disk+'%'}}[k];el.innerHTML=gauge(d.p,d.c,d.l,d.v,110);});const r=document.getElementById('m-rpm');if(r)r.textContent=m.rpm+' RPM';const u=document.getElementById('m-up');if(u)u.textContent=m.up;const n=document.getElementById('m-net');if(n)n.textContent=m.net+' MB/s';['cpu','ram','temp'].forEach(k=>{const el=document.getElementById('m-hist-'+k);if(el){const c={cpu:'#10b981',ram:'#6366f1',temp:'#f59e0b'}[k];el.innerHTML=miniChart(S.hist[k],c,160,40);}});}

function updFanLive(){const r=document.getElementById('f-rpm');if(r)r.textContent=S.mon.rpm;const t=document.getElementById('f-temp');if(t)t.textContent=S.mon.temp+'¬∞C';}

function updDash(){const m=S.mon;const c=document.getElementById('d-cpu');if(c)c.innerHTML=gauge(m.cpu,m.cpu>80?'#ef4444':m.cpu>50?'#f59e0b':'#10b981','CPU',m.cpu+'%',85);const r=document.getElementById('d-ram');if(r)r.innerHTML=gauge(m.ram,m.ram>85?'#ef4444':'#6366f1','RAM',m.ram+'%',85);const t=document.getElementById('d-temp');if(t)t.innerHTML=gauge(m.temp,m.temp>70?'#ef4444':'#10b981','TEMP',m.temp+'¬∞C',85);const f=document.getElementById('d-fan');if(f)f.textContent=m.rpm;['cpu','ram'].forEach(k=>{const el=document.getElementById('d-hist-'+k);if(el){const col={cpu:'#10b981',ram:'#6366f1'}[k];el.innerHTML=miniChart(S.hist[k],col);}});}

// ===== RENDER =====
function render(id){const fn={dashboard:pDash,monitor:pMon,fans:pFans,performance:pPerf,cleanup:pClean,network:pNet,power:pPow,startup:pStart,gaming:pGame,keybinds:pKeys,visual:pVis,taskbar:pTask,explorer:pExp,sound:pSnd,privacy:pPriv,services:pSvc,updates:pUpd,security:pSec,maintenance:pMaint,terminal:pTerm,profiles:pProf,makeapp:pMakeApp,about:pAbout,credits:pCredits};document.getElementById('content').innerHTML=(fn[id]||pDash)();if(id==='fans')initFanCanvas();}

// ===== DASHBOARD =====
function pDash(){const h=S.hw,gpu=h.gpu?h.gpu.replace(/ANGLE \(|,.*|\)/g,'').substring(0,35):'N/A';
return`<div class="hw-card p-3.5 mb-4 fade-up"><div class="flex items-center justify-between flex-wrap gap-2.5"><div class="flex items-center gap-2.5"><div class="w-10 h-10 bg-gradient-to-br from-indigo-500/12 to-violet-500/12 rounded-xl flex items-center justify-center text-xl border border-indigo-500/6">${h.os==='Windows'?'üñ•Ô∏è':h.os==='macOS'?'üçé':'üì±'}</div><div><h3 class="font-bold text-white text-sm">${h.brand} ${h.model||''}</h3><p class="text-[10px] text-slate-400">${h.osVer?'Windows '+h.osVer:h.os} ¬∑ ${h.arch} ¬∑ ${h.cores} n√∫cleos${h.ram?' ¬∑ '+h.ram+'GB':''}${gpu!=='N/A'?' ¬∑ '+gpu:''}</p></div></div>${h.battery?`<div class="stat px-2 py-1 flex items-center gap-1"><span class="text-xs">${h.charging?'üîå':'üîã'}</span><span class="text-[10px] font-bold ${h.batteryLevel<20?'text-red-400':h.batteryLevel<50?'text-amber-400':'text-emerald-400'}">${h.batteryLevel}%</span></div>`:''}</div></div>
<div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-4"><div class="card p-3"><div class="flex items-center justify-between"><div id="d-cpu">${gauge(S.mon.cpu,'#10b981','CPU',S.mon.cpu+'%',85)}</div><div id="d-hist-cpu" class="hidden md:block">${miniChart(S.hist.cpu,'#10b981')}</div></div></div><div class="card p-3"><div class="flex items-center justify-between"><div id="d-ram">${gauge(S.mon.ram,'#6366f1','RAM',S.mon.ram+'%',85)}</div><div id="d-hist-ram" class="hidden md:block">${miniChart(S.hist.ram,'#6366f1')}</div></div></div><div class="card p-3"><div class="flex items-center justify-center"><div id="d-temp">${gauge(S.mon.temp,'#10b981','TEMP',S.mon.temp+'¬∞C',85)}</div></div></div><div class="card p-3 flex flex-col items-center justify-center"><p class="text-xl mb-0.5">üåÄ</p><p class="font-black text-white text-lg" id="d-fan">${S.mon.rpm}</p><p class="text-[8px] text-slate-600">RPM</p></div></div>
<div class="grid grid-cols-3 md:grid-cols-6 gap-1.5 mb-4">${[['monitor','üìä','Monitor'],['fans','üåÄ','Fans'],['performance','‚ö°','Rendimiento'],['gaming','üéÆ','Gaming'],['makeapp','üì¶','Crear App'],['cleanup','üßπ','Limpieza']].map(([id,ic,n])=>`<div class="qa-btn" onclick="go('${id}')"><p class="text-base mb-0.5">${ic}</p><p class="text-[9px] font-semibold text-slate-400">${n}</p></div>`).join('')}</div>
<div class="grid md:grid-cols-2 gap-3 mb-4"><div class="card p-4">${hdr('üöÄ','Presets R√°pidos','1 clic')}<div class="space-y-1.5">${[['balanced','‚öñÔ∏è','Equilibrado','Uso diario'],['max','üî•','M√°x Rendimiento','100% potencia'],['privacy','üõ°Ô∏è','Privacidad','Sin telemetr√≠a'],['silent','ü§´','Silencioso','Fans m√≠nimo'],['battery','üîã','Ahorro Bater√≠a','M√°xima duraci√≥n']].map(([id,ic,n,d])=>`<button onclick="applyPreset('${id}')" class="preset-btn group"><div class="flex items-center justify-between"><div class="flex items-center gap-2"><span class="text-sm">${ic}</span><div><p class="font-bold text-white text-[11px]">${n}</p><p class="text-[8px] text-slate-600">${d}</p></div></div><svg class="w-3 h-3 text-slate-700 group-hover:text-indigo-400 group-hover:translate-x-0.5 transition-all" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 5l7 7-7 7"/></svg></div></button>`).join('')}</div></div>
<div class="space-y-2.5"><div class="card p-4"><div class="bg-emerald-500/4 border border-emerald-500/6 rounded-lg p-3 text-center"><p class="text-3xl mb-0.5">üõ°Ô∏è</p><p class="font-bold text-emerald-400 text-[11px] tracking-wide">PROTEGIDO</p><p class="text-[8px] text-slate-500 mt-0.5">Defender <strong>nunca</strong> se modifica</p></div></div><div class="card p-3 border-l-2 border-l-amber-500/30"><div class="flex items-start gap-2"><span class="text-sm">‚ö†Ô∏è</span><div><h4 class="font-bold text-amber-300 text-[10px] mb-0.5">Antes de ejecutar</h4><ul class="text-[8px] text-slate-600 space-y-0.5"><li>‚Ä¢ Punto de restauraci√≥n auto</li><li>‚Ä¢ Ejecutar como Admin</li><li>‚Ä¢ Reinicio puede ser necesario</li></ul></div></div></div></div></div>
<div class="card p-4 text-center"><p class="text-[11px] text-slate-400 mb-2.5">Configura y luego:</p><div class="flex justify-center gap-2 flex-wrap"><button onclick="openExec()" class="btn btn-success px-5 py-2 text-[11px]">‚ñ∂ Ejecutar</button><button onclick="openExport()" class="btn btn-primary px-4 py-2 text-[11px]">üì¶ Exportar</button></div><p class="text-[8px] text-slate-700 mt-1.5">${cCount} opciones configuradas</p></div>`;}

// ===== MONITOR =====
function pMon(){const m=S.mon;return`${hdr('üìä','Monitor del Sistema','M√©tricas en tiempo real ‚Äî '+S.hw.brand)}<div class="grid grid-cols-2 md:grid-cols-4 gap-2.5 mb-4"><div class="card p-3 flex justify-center" id="m-cpu">${gauge(m.cpu,'#10b981','CPU',m.cpu+'%',110)}</div><div class="card p-3 flex justify-center" id="m-ram">${gauge(m.ram,'#6366f1','RAM',m.ram+'%',110)}</div><div class="card p-3 flex justify-center" id="m-temp">${gauge(m.temp,'#10b981','TEMP',m.temp+'¬∞C',110)}</div><div class="card p-3 flex justify-center" id="m-disk">${gauge(m.disk,'#8b5cf6','DISCO',m.disk+'%',110)}</div></div>${divider('Historial')}<div class="grid md:grid-cols-3 gap-2.5 mb-4"><div class="card p-3"><p class="text-[8px] text-slate-500 mb-1.5 font-semibold">CPU</p><div id="m-hist-cpu">${miniChart(S.hist.cpu,'#10b981',160,40)}</div></div><div class="card p-3"><p class="text-[8px] text-slate-500 mb-1.5 font-semibold">RAM</p><div id="m-hist-ram">${miniChart(S.hist.ram,'#6366f1',160,40)}</div></div><div class="card p-3"><p class="text-[8px] text-slate-500 mb-1.5 font-semibold">Temperatura</p><div id="m-hist-temp">${miniChart(S.hist.temp,'#f59e0b',160,40)}</div></div></div><div class="grid grid-cols-2 md:grid-cols-4 gap-2"><div class="stat p-2.5 flex items-center gap-2"><span class="text-lg">üåÄ</span><div><p class="text-[8px] text-slate-600">Fan</p><p class="font-bold text-white text-sm" id="m-rpm">${m.rpm} RPM</p></div></div><div class="stat p-2.5 flex items-center gap-2"><span class="text-lg">‚è±Ô∏è</span><div><p class="text-[8px] text-slate-600">Uptime</p><p class="font-bold text-white text-sm" id="m-up">${m.up}</p></div></div><div class="stat p-2.5 flex items-center gap-2"><span class="text-lg">üåê</span><div><p class="text-[8px] text-slate-600">Red</p><p class="font-bold text-white text-sm" id="m-net">${m.net} MB/s</p></div></div><div class="stat p-2.5 flex items-center gap-2"><span class="text-lg">üíª</span><div><p class="text-[8px] text-slate-600">Sistema</p><p class="font-bold text-white text-[9px]">${S.hw.brand} ¬∑ ${S.hw.cores}C</p></div></div></div>`;}

// ===== FANS =====
function pFans(){const fp=S.fan.profile;return`${hdr('üåÄ','Control de Ventiladores','Perfiles y curva personalizada')}<div class="grid grid-cols-2 gap-2 mb-3"><div class="stat p-3 text-center"><p class="text-[8px] text-slate-600 mb-0.5">RPM Actual</p><p class="text-xl font-black text-white" id="f-rpm">${S.mon.rpm}</p></div><div class="stat p-3 text-center"><p class="text-[8px] text-slate-600 mb-0.5">Temperatura</p><p class="text-xl font-black text-white" id="f-temp">${S.mon.temp}¬∞C</p></div></div><div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-4">${['silent','balanced','performance','custom'].map(p=>{const d={silent:{n:'Silencioso',r:'~1200',a:'spin-slow'},balanced:{n:'Equilibrado',r:'~2400',a:'spin-med'},performance:{n:'Rendimiento',r:'~3800',a:'spin-fast'},custom:{n:'Custom',r:'Variable',a:'spin-med'}}[p];return`<button onclick="setFanP('${p}')" class="card p-3 text-center cursor-pointer ${fp===p?'on':''}"><div class="text-xl mb-0.5 ${fp===p?d.a:''}">üåÄ</div><p class="font-bold text-white text-[10px]">${d.n}</p><p class="text-[8px] text-indigo-400 mono mt-0.5">${d.r}</p></button>`;}).join('')}</div>${divider('Curva')}<div class="card p-3.5 mb-3"><div class="flex items-center justify-between mb-2"><p class="font-semibold text-white text-[11px]">Temperatura ‚Üí Velocidad</p><button onclick="resetFC()" class="btn btn-ghost px-2 py-1 text-[8px]">‚Ü∫ Reset</button></div><div class="fan-box p-2" style="height:180px" id="fanWrap"><canvas id="fanCanvas" width="500" height="170"></canvas></div><div class="grid grid-cols-5 gap-1 mt-2" id="fanInputs"></div></div>${divider('Config')}${grid(`${sli('fan_min','Vel. m√≠nima','RPM m√≠nimas',0,50,10,'%')}${sli('fan_max','Vel. m√°xima','RPM m√°ximas',50,100,100,'%')}${tog('fan_smart','Modo inteligente','Auto seg√∫n carga',true,'low')}${sel('fan_tool','Herramienta','Software de control',[{v:'nbfc',l:'NBFC'},{v:'brand',l:S.hw.brand},{v:'ps',l:'PowerShell'}],'nbfc')}`)}`;}
function setFanP(p){S.fan.profile=p;track('fan_profile',p);const c={silent:[{t:30,s:8},{t:45,s:18},{t:60,s:30},{t:75,s:50},{t:90,s:65}],balanced:[{t:30,s:10},{t:45,s:25},{t:60,s:50},{t:75,s:80},{t:90,s:100}],performance:[{t:30,s:30},{t:45,s:50},{t:60,s:70},{t:75,s:90},{t:90,s:100}]};if(c[p])S.fan.curve=c[p];render('fans');}
function resetFC(){S.fan.curve=[{t:30,s:10},{t:45,s:25},{t:60,s:50},{t:75,s:80},{t:90,s:100}];render('fans');}
function initFanCanvas(){const c=document.getElementById('fanCanvas'),w=document.getElementById('fanWrap');if(!c||!w)return;c.width=w.clientWidth-16;c.height=170;drawFC();updFI();}
function drawFC(){const c=document.getElementById('fanCanvas');if(!c)return;const ctx=c.getContext('2d'),w=c.width,h=c.height,p=30;ctx.clearRect(0,0,w,h);ctx.strokeStyle='rgba(99,102,241,0.025)';ctx.lineWidth=0.5;for(let i=0;i<=10;i++){const x=p+(w-p*2)*i/10;ctx.beginPath();ctx.moveTo(x,4);ctx.lineTo(x,h-p);ctx.stroke();const y=4+(h-p-4)*i/10;ctx.beginPath();ctx.moveTo(p,y);ctx.lineTo(w-p,y);ctx.stroke();}ctx.fillStyle='#252d3d';ctx.font='8px Inter';for(let t=30;t<=90;t+=15){const x=p+(t-20)/80*(w-p*2);ctx.fillText(t+'¬∞',x-6,h-p+12);}for(let s=0;s<=100;s+=25){const y=h-p-s/100*(h-p-4);ctx.fillText(s+'%',2,y+3);}const pts=S.fan.curve.map(pt=>({x:p+(pt.t-20)/80*(w-p*2),y:h-p-pt.s/100*(h-p-4)}));ctx.beginPath();ctx.moveTo(pts[0].x,h-p);pts.forEach(pt=>ctx.lineTo(pt.x,pt.y));ctx.lineTo(pts[pts.length-1].x,h-p);ctx.closePath();const g=ctx.createLinearGradient(0,0,0,h);g.addColorStop(0,'rgba(99,102,241,0.06)');g.addColorStop(1,'rgba(99,102,241,0)');ctx.fillStyle=g;ctx.fill();ctx.beginPath();pts.forEach((pt,i)=>i===0?ctx.moveTo(pt.x,pt.y):ctx.lineTo(pt.x,pt.y));ctx.strokeStyle='#6366f1';ctx.lineWidth=1.8;ctx.stroke();pts.forEach((pt,i)=>{ctx.beginPath();ctx.arc(pt.x,pt.y,4,0,Math.PI*2);ctx.fillStyle='#6366f1';ctx.fill();ctx.strokeStyle='#c7d2fe';ctx.lineWidth=1.2;ctx.stroke();ctx.fillStyle='#c7d2fe';ctx.font='bold 7px Inter';ctx.fillText(S.fan.curve[i].t+'¬∞‚Üí'+S.fan.curve[i].s+'%',pt.x-14,pt.y-8);});}
function updFI(){const d=document.getElementById('fanInputs');if(!d)return;d.innerHTML=S.fan.curve.map((pt,i)=>`<div class="stat p-1 text-center"><p class="text-[7px] text-slate-700 mb-0.5">P${i+1}</p><div class="flex items-center gap-0.5 justify-center"><input type="number" value="${pt.t}" min="20" max="100" class="w-8 bg-slate-900/80 border border-slate-700/30 rounded px-0.5 py-0.5 text-[8px] text-center text-white focus:outline-none focus:border-indigo-500" onchange="updFP(${i},'t',this.value)"><span class="text-slate-700 text-[6px]">‚Üí</span><input type="number" value="${pt.s}" min="0" max="100" class="w-8 bg-slate-900/80 border border-slate-700/30 rounded px-0.5 py-0.5 text-[8px] text-center text-white focus:outline-none focus:border-indigo-500" onchange="updFP(${i},'s',this.value)"><span class="text-slate-700 text-[6px]">%</span></div></div>`).join('');}
function updFP(i,k,v){S.fan.curve[i][k]=parseInt(v);track('fan_curve','custom');S.fan.profile='custom';drawFC();updFI();}

// ===== ALL PAGES =====
function pPerf(){return`${hdr('‚ö°','Rendimiento',S.hw.brand+' ¬∑ '+S.hw.cores+' n√∫cleos')}${grid(`${tog('p_sysmain','Desactivar SysMain','Libera RAM y reduce disco',true,'med')}${tog('p_prefetch','Desactivar Prefetch','Reduce escrituras disco',false,'med')}${tog('p_indexing','Sin Windows Search','Reduce CPU y disco',true,'low')}${tog('p_visual','Optimizar efectos','Sin animaciones extras',true,'low')}${tog('p_transparency','Sin transparencias','Reduce carga GPU',true,'low')}${tog('p_startup_delay','Sin delay inicio','Men√∫ inicio r√°pido',true,'low')}${tog('p_menu_delay','Men√∫s r√°pidos','Contextuales √°giles',true,'low')}${tog('p_tips','Sin tips Windows','Sin notif innecesarias',true,'low')}${tog('p_cpu_priority','Priorizar ventana','M√°s CPU al activo',true,'low')}${tog('p_ntfs_last','Sin acceso NTFS','Reduce escrituras',true,'low')}${tog('p_core_parking','Sin Core Parking','${S.hw.cores} n√∫cleos activos',false,'med')}${tog('p_timer_res','Alta res timer','Mejor precisi√≥n',false,'med')}`)}`;}
function pClean(){return`${hdr('üßπ','Limpieza','Elimina archivos innecesarios')}${grid(`${tog('c_temp','Limpiar temporales','%TEMP%, Prefetch, cache',true,'low')}${tog('c_recycle','Vaciar papelera','Elimina borrados',true,'low')}${tog('c_update','Cach√© Updates','Updates ya instalados',true,'med')}${tog('c_thumb','Miniaturas','Cache thumbnails',true,'low')}${tog('c_logs','Logs sistema','Registros antiguos',true,'low')}${tog('c_dns','Cach√© DNS','Renueva DNS',true,'low')}${tog('c_bloatware','Remover bloatware','Apps preinstaladas',false,'high')}${tog('c_delivery','Delivery Opt.','Archivos distribuci√≥n',true,'low')}${tog('c_error','Reportes error','Error Reports',true,'low')}`)}`;}
function pNet(){return`${hdr('üåê','Red','Optimiza conexi√≥n')}${grid(`${tog('n_flush','Flush DNS','Limpia cach√© DNS',true,'low')}${tog('n_winsock','Reset Winsock','Restablece config red',false,'med')}${tog('n_tcpip','Reset TCP/IP','Reinicia pila TCP',false,'med')}${tog('n_nagle','Sin Nagle','Reduce latencia juegos',false,'med')}${tog('n_qos','Sin QoS','Libera ancho banda',true,'low')}${tog('n_autotuning','Sin Auto-Tuning','Estabiliza WiFi',false,'med')}`)}${divider('DNS')}${grid(`${sel('n_dns','DNS','Proveedor r√°pido',[{v:'default',l:'ISP'},{v:'google',l:'Google 8.8.8.8'},{v:'cloudflare',l:'Cloudflare 1.1.1.1'},{v:'quad9',l:'Quad9 9.9.9.9'}],'cloudflare')}${sel('n_adapter','Adaptador','Conexi√≥n',[{v:'wifi',l:'Wi-Fi'},{v:'ethernet',l:'Ethernet'}],'wifi')}`)}`;}
function pPow(){return`${hdr('üîã','Energ√≠a','Plan'+(S.hw.battery?' ¬∑ '+S.hw.batteryLevel+'%':''))}${grid(`${tog('pw_high','Alto Rendimiento','Energ√≠a m√°xima',true,'low')}${tog('pw_hibernate','Sin hibernaci√≥n','Libera ~4GB disco',true,'low')}${tog('pw_fast_start','Sin inicio r√°pido','Arranque limpio',false,'low')}${tog('pw_usb','Sin USB Suspend','No apagar USB',true,'low')}${tog('pw_disk','Nunca apagar disco','Sin lag',true,'low')}${tog('pw_cpu_max','CPU 100%','M√°x constante',false,'med')}`)}${divider('Tiempos')}${grid(`${sli('pw_screen_ac','Pantalla AC','Min apagar',0,60,15,' min')}${sli('pw_screen_dc','Pantalla bat.','Min apagar',0,30,5,' min')}${sli('pw_sleep_ac','Suspender AC','0=nunca',0,120,30,' min')}${sli('pw_sleep_dc','Suspender bat.','Min',0,60,15,' min')}`)}`;}
function pStart(){return`${hdr('üöÄ','Arranque','Programas de inicio')}${grid(`${tog('b_delay','Sin delay apps','Inicio r√°pido',true,'low')}${tog('b_numlock','NumLock auto','Activa al inicio',true,'low')}${tog('b_verbose','Boot verbose','Detalles en boot',false,'low')}`)}${divider('Apps')}${grid(`${tog('b_onedrive','Sin OneDrive','No abrir',true,'low')}${tog('b_teams','Sin Teams','No abrir',true,'low')}${tog('b_edge','Sin Edge','No precargar',true,'low')}${tog('b_spotify','Sin Spotify','No abrir',true,'low')}${tog('b_discord','Sin Discord','No abrir',false,'low')}${tog('b_cortana','Sin Cortana','No iniciar',true,'low')}${tog('b_adobe','Sin Adobe upd','Sin actualizador',true,'low')}${tog('b_skype','Sin Skype','No abrir',true,'low')}`)}`;}
function pGame(){return`${hdr('üéÆ','Gaming','FPS y latencia')}${grid(`${tog('g_mode','Game Mode','Prioriza juegos',true,'low')}${tog('g_dvr','Sin Game DVR','Sin grabaci√≥n',true,'low')}${tog('g_fullscreen','Sin opt fullscreen','Mejora FPS',true,'low')}${tog('g_mouse','Sin aceleraci√≥n','Mouse 1:1',true,'low')}${tog('g_nagle','Sin Nagle gaming','Reduce ping',true,'med')}${tog('g_hpet','Sin HPET','Mejor rendimiento',false,'high')}${tog('g_throttle','Sin Throttling','CPU no baja',true,'low')}${tog('g_notif','Sin notificaciones','Sin popups',true,'low')}${tog('g_xbox','Sin Xbox Bar','Libera recursos',true,'low')}${tog('g_standby','Limpiar RAM','Libera peri√≥dicamente',false,'med')}`)}${divider('GPU')}${grid(`${sel('g_gpu_sched','GPU Scheduling','HW scheduling',[{v:'off',l:'Off'},{v:'on',l:'On'}],'on')}${sel('g_gpu_mode','Modo GPU','Preferencia',[{v:'balanced',l:'Equilibrado'},{v:'high',l:'Alto rendimiento'}],'high')}`)}`;}
function pKeys(){return`${hdr('‚å®Ô∏è','Keybinds','Clic y presiona teclas')}<div class="card p-2.5 mb-3 border-l-2 border-l-amber-500/30"><p class="text-[9px] text-amber-200/70">üí° Se exportan como <strong>AutoHotkey (.AHK)</strong></p></div>${divider('Sistema')}${grid(`${kb('k_screenshot','Screenshot','Captura','Win + Shift + S')}${kb('k_taskmgr','Task Manager','Admin tareas','Ctrl + Shift + Escape')}${kb('k_run','Ejecutar','Di√°logo','Win + R')}${kb('k_explorer','Explorador','Archivos','Win + E')}${kb('k_cmd','Terminal','CMD admin','Ctrl + Shift + T')}${kb('k_desktop','Escritorio','Mostrar','Win + D')}${kb('k_close','Cerrar ventana','Activa','Alt + F4')}${kb('k_minimize','Minimizar','Todo','Win + M')}`)}${divider('Multimedia')}${grid(`${kb('k_vol_up','Vol +','Subir','Ctrl + Up')}${kb('k_vol_down','Vol -','Bajar','Ctrl + Down')}${kb('k_mute','Mute','Toggle','Ctrl + M')}${kb('k_play','Play/Pausa','Media','Ctrl + Space')}`)}${divider('Apps')}${grid(`${kb('k_calc','Calculadora','Abrir','Ctrl + Alt + C')}${kb('k_notepad','Notepad','Bloc notas','Ctrl + Alt + N')}${kb('k_lock','Bloquear','Pantalla','Win + L')}${kb('k_browser','Navegador','Abrir','Ctrl + Alt + B')}`)}`;}
function pVis(){return`${hdr('üé®','Visual','Apariencia Windows')}${grid(`${tog('v_dark','Modo oscuro','Tema oscuro sistema',true,'low')}${tog('v_dark_apps','Oscuro apps','Apps oscuras',true,'low')}${tog('v_no_anim','Sin animaciones','M√°s r√°pido',true,'low')}${tog('v_no_trans','Sin transparencias','Reduce GPU',true,'low')}${tog('v_no_shadow','Sin sombras','Sin sombras ventanas',false,'low')}${tog('v_ext','Extensiones','Archivos visibles',true,'low')}${tog('v_smooth_font','Suavizado fuentes','ClearType',true,'low')}${tog('v_wallpaper','Wallpaper HD','Sin compresi√≥n',true,'low')}`)}${divider('Cursor')}${grid(`${sli('v_cursor','Velocidad cursor','Mouse',1,20,10,'')}${tog('v_no_accel','Sin aceleraci√≥n','1:1 gaming',false,'low')}`)}`;}
function pTask(){return`${hdr('üìå','Taskbar','Barra de tareas')}${grid(`${tog('t_search','Ocultar b√∫squeda','Sin barra',true,'low')}${tog('t_taskview','Sin Task View','Sin bot√≥n',true,'low')}${tog('t_widgets','Sin Widgets','Sin widgets',true,'low')}${tog('t_chat','Sin Chat','Sin √≠cono',true,'low')}${tog('t_copilot','Sin Copilot','Sin bot√≥n',true,'low')}${tog('t_small','Iconos peque√±os','Compacta',false,'low')}${tog('t_never_combine','No combinar','Separadas',false,'low')}${tog('t_tray','Iconos tray','Bandeja visible',false,'low')}`)}${divider('Posici√≥n')}${grid(`${sel('t_align','Alineaci√≥n','Iconos',[{v:'center',l:'Centro'},{v:'left',l:'Izquierda'}],'left')}`)}`;}
function pExp(){return`${hdr('üìÅ','Explorador','Archivos')}${grid(`${tog('e_ext','Extensiones','Muestra extensiones',true,'low')}${tog('e_hidden','Ocultos','Muestra ocultos',true,'low')}${tog('e_thispc','Este PC','No Recientes',true,'low')}${tog('e_classic','Men√∫ cl√°sico','Sin "M√°s opciones"',true,'low')}${tog('e_no_recent','Sin recientes','No recientes',true,'low')}${tog('e_full_path','Ruta completa','En barra',true,'low')}${tog('e_compact','Vista compacta','Menos espacio',true,'low')}${tog('e_no_ads','Sin anuncios','Sin tips',true,'low')}`)}`;}
function pSnd(){return`${hdr('üîä','Sonido','Audio')}${grid(`${tog('s_no_startup','Sin sonido inicio','Silencia inicio',true,'low')}${tog('s_no_notif','Sin sonido notif','Silenciosas',false,'low')}${tog('s_exclusive','Exclusivo off','Apps no toman audio',false,'med')}${tog('s_comms','Sin reducci√≥n','No baja vol en llamadas',true,'low')}${tog('s_loudness','Ecualizaci√≥n','Normaliza vol',false,'low')}`)}${divider('Formato')}${grid(`${sli('s_vol','Volumen default','Vol al iniciar',0,100,50,'%')}${sel('s_format','Formato','Calidad',[{v:'16_44',l:'16bit 44.1kHz'},{v:'16_48',l:'16bit 48kHz'},{v:'24_48',l:'24bit 48kHz'},{v:'24_96',l:'24bit 96kHz'}],'16_48')}`)}`;}
function pPriv(){return`${hdr('üõ°Ô∏è','Privacidad','Telemetr√≠a y tracking')}<div class="card p-2.5 mb-3 border-l-2 border-l-emerald-500/30"><p class="text-[9px] text-emerald-200/70">‚úÖ <strong>Defender NO se toca.</strong></p></div>${grid(`${tog('pr_telemetry','Sin telemetr√≠a','Bloquea diagn√≥sticos',true,'med')}${tog('pr_cortana','Sin Cortana','Deshabilita',true,'low')}${tog('pr_activity','Sin historial','No guardar actividad',true,'low')}${tog('pr_ad_id','Sin ID publicidad','Sin anuncios',true,'low')}${tog('pr_location','Sin ubicaci√≥n','No compartir',true,'low')}${tog('pr_diag','Diagn√≥stico m√≠n','Solo obligatorios',true,'low')}${tog('pr_feedback','Sin feedback','No pedir opiniones',true,'low')}${tog('pr_suggestions','Sin sugerencias','Sin apps sugeridas',true,'low')}${tog('pr_lockscreen','Sin tips lock','Sin anuncios lock',true,'low')}${tog('pr_timeline','Sin Timeline','Sin l√≠nea tiempo',true,'low')}${tog('pr_clipboard','Sin sync clip','No sincronizar',true,'low')}${tog('pr_input','Sin datos escrit','No enviar typing',true,'low')}`)}`;}
function pSvc(){return`${hdr('‚öôÔ∏è','Servicios','Desactiva innecesarios')}<div class="card p-2.5 mb-3 border-l-2 border-l-red-500/30"><p class="text-[9px] text-red-200/70">‚ö†Ô∏è <strong>Defender NO incluido.</strong></p></div>${grid(`${tog('sv_diagtrack','DiagTrack','Telemetr√≠a principal',true,'med')}${tog('sv_dmwap','dmwappush','WAP push',true,'med')}${tog('sv_sysmain','SysMain','Superfetch',true,'med')}${tog('sv_wsearch','Windows Search','Indexaci√≥n',true,'med')}${tog('sv_xbox','Servicios Xbox','Auth, Save',true,'low')}${tog('sv_maps','Mapas','Mapas offline',true,'low')}${tog('sv_fax','Fax','Servicio fax',true,'low')}${tog('sv_print','Impresi√≥n','Si usas impresora',false,'med')}${tog('sv_remote','Reg. remoto','Acceso remoto',true,'low')}${tog('sv_phone','PhoneSvc','Tel√©fono',true,'low')}${tog('sv_retail','RetailDemo','Demo tienda',true,'low')}${tog('sv_wallet','Wallet','Billetera',true,'low')}`)}`;}
function pUpd(){return`${hdr('üîÑ','Updates','Actualizaciones')}${grid(`${tog('wu_no_restart','Sin reinicio auto','Sin permiso',true,'low')}${tog('wu_no_driver','Sin upd drivers','No toca drivers',false,'med')}${tog('wu_no_feature','Sin Feature Upd','Bloquea grandes',false,'high')}${tog('wu_metered','Conexi√≥n medida','Reduce descargas',false,'med')}${tog('wu_no_peer','Sin P2P','No compartir',true,'low')}${tog('wu_notify','Solo notificar','No auto descargar',false,'med')}${tog('wu_no_store','Sin auto Store','Store no actualiza',false,'low')}`)}${divider('Horas')}${grid(`${sli('wu_start','Hora inicio','Horas activas',0,23,8,'h')}${sli('wu_end','Hora fin','Horas activas',0,23,23,'h')}`)}`;}
function pSec(){return`${hdr('üîí','Seguridad','Configuraci√≥n')}<div class="bg-emerald-500/4 border border-emerald-500/6 rounded-lg p-2.5 mb-3 flex items-center gap-2"><span class="text-xl">üõ°Ô∏è</span><div><p class="font-bold text-emerald-400 text-[11px]">Defender PROTEGIDO</p><p class="text-[8px] text-slate-500">NO se modifica.</p></div></div>${grid(`${tog('sec_smb1','Sin SMBv1','Protocolo antiguo',true,'low')}${tog('sec_remote','Sin Escritorio Rem.','Desactiva',true,'low')}${tog('sec_assist','Sin Asistencia','Desactiva',true,'low')}${tog('sec_autoplay','Sin AutoPlay','No ejecutar USB',true,'low')}${tog('sec_netbios','Sin NetBIOS','Legacy inseguro',true,'low')}${tog('sec_null','Sesiones nulas','Bloquea an√≥nimo',true,'low')}${tog('sec_lm','Sin LM Hash','Hash seguro',true,'low')}${tog('sec_wpad','Sin WPAD','Sin proxy auto',true,'low')}`)}`;}
function pMaint(){return`${hdr('üîß','Mantenimiento','Reparaci√≥n')}${grid(`${tog('m_sfc','SFC /scannow','Repara archivos',true,'low')}${tog('m_dism','DISM Restore','Repara imagen',true,'low')}${tog('m_chkdsk','Verificar disco','Errores disco',false,'med')}${tog('m_defrag','Optimizar disco','Desfrag/TRIM',true,'low')}${tog('m_restore','Punto restauraci√≥n','Antes de cambios',true,'low')}${tog('m_logs','Limpiar logs','Registros eventos',false,'low')}${tog('m_store','Reset Store','Repara Store',false,'low')}${tog('m_network','Reset red','Reinstala adaptadores',false,'med')}${tog('m_winsxs','Limpiar WinSxS','Componentes obsoletos',false,'med')}${tog('m_icon','Rebuild iconos','Iconos corruptos',false,'low')}`)}`;}

// ===== TERMINAL =====
function pTerm(){return`${hdr('üíª','Terminal','Comandos')}<div class="term mb-3"><div class="term-head"><div class="flex gap-1.5"><div class="w-2 h-2 bg-red-500 rounded-full"></div><div class="w-2 h-2 bg-yellow-500 rounded-full"></div><div class="w-2 h-2 bg-green-500 rounded-full"></div></div><span class="text-slate-500 text-[9px] ml-2 mono">PCTuner ¬∑ ${S.hw.brand}</span></div><div class="term-body" id="tBody"><p class="text-emerald-400">PCTuner Pro v6 ‚Äî ${S.hw.brand} ${S.hw.os}</p><p class="text-slate-700 text-[8px] mt-0.5">Simulaci√≥n. Exporta para ejecutar real.</p><p class="text-emerald-400 mt-1.5">C:\\PCTuner> <span class="animate-pulse">_</span></p></div></div><div class="grid grid-cols-2 md:grid-cols-3 gap-1.5">${[['sfc /scannow','üîç','SFC','Verificar'],['ipconfig /flushdns','üåê','DNS','Limpiar'],['systeminfo','üíª','Info','Sistema'],['cleanmgr','üßπ','Limpiar','Disco'],['powercfg /batteryreport','üîã','Bater√≠a','Reporte'],['netsh wlan show profiles','üì°','WiFi','Redes']].map(([cmd,ic,n,d])=>`<button onclick="tRun('${cmd}')" class="card p-2.5 text-center cursor-pointer hover:border-indigo-500/12"><p class="text-base mb-0.5">${ic}</p><p class="font-bold text-white text-[9px]">${n}</p><p class="text-[7px] text-slate-600">${d}</p></button>`).join('')}</div>`;}
function tRun(cmd){const el=document.getElementById('tBody');if(!el)return;const o={'sfc /scannow':'Examen del sistema...\n[========= 100% =========]\nOK.','ipconfig /flushdns':'Config IP Windows\nCach√© DNS vaciada.','systeminfo':`${S.hw.brand}\n${S.hw.osVer||S.hw.os} ¬∑ ${S.hw.arch}\n${S.hw.cores} n√∫cleos ¬∑ ${S.hw.ram||'?'}GB`,'cleanmgr':'Temp: 2.1 GB\nPapelera: 650 MB\nLiberado: 2.75 GB','powercfg /batteryreport':`Bater√≠a: ${S.hw.battery?S.hw.batteryLevel+'%':'N/A'}`,'netsh wlan show profiles':'WiFi:\n  MiRed_5G\n  CafeGratis'};const out=o[cmd]||'OK';el.innerHTML+=`<p class="text-cyan-400 mt-1.5">C:\\> <span class="text-white">${cmd}</span></p>`;out.split('\n').forEach((l,i)=>{setTimeout(()=>{el.innerHTML+=`<p class="text-emerald-400 fade-up">${l}</p>`;el.scrollTop=el.scrollHeight;},i*80);});setTimeout(()=>{el.innerHTML+=`<p class="text-emerald-400 mt-1">C:\\> <span class="animate-pulse">_</span></p>`;el.scrollTop=el.scrollHeight;},out.split('\n').length*80+100);}

// ===== PROFILES =====
function pProf(){const saved=JSON.parse(localStorage.getItem('pct6')||'{}');const names=Object.keys(saved);return`${hdr('üíæ','Perfiles','Guardar y cargar')}<div class="grid md:grid-cols-2 gap-2.5 mb-4"><div class="card p-3.5"><h4 class="font-bold text-white text-[11px] mb-2">üíæ Guardar</h4><input type="text" id="pName" placeholder="Nombre..." class="w-full bg-slate-900/80 border border-slate-700/30 rounded-lg px-3 py-1.5 text-[11px] mb-1.5 focus:border-indigo-500 focus:outline-none text-white placeholder-slate-700"><button onclick="saveProf()" class="w-full btn btn-primary py-1.5 text-[10px]">Guardar</button></div><div class="card p-3.5"><h4 class="font-bold text-white text-[11px] mb-2">üìÇ Import/Export</h4><div class="flex gap-1.5"><button onclick="expJSON()" class="flex-1 btn btn-success py-1.5 text-[10px]">üì§ JSON</button><label class="flex-1 btn btn-primary py-1.5 text-[10px] text-center cursor-pointer">üì• Import<input type="file" accept=".json" class="hidden" onchange="impJSON(event)"></label></div></div></div>${names.length?`${divider('Guardados')}<div class="section-grid stagger">${names.map(n=>`<div class="card p-3 flex items-center justify-between"><div><p class="font-semibold text-white text-[11px]">${n}</p><p class="text-[8px] text-slate-600">${Object.keys(saved[n].t||{}).length} opciones</p></div><div class="flex gap-1"><button onclick="loadProf('${n}')" class="btn btn-primary px-2.5 py-1 text-[9px]">Cargar</button><button onclick="delProf('${n}')" class="btn btn-danger px-2 py-1 text-[9px]">‚úï</button></div></div>`).join('')}</div>`:''}`;}
function saveProf(){const n=document.getElementById('pName')?.value?.trim();if(!n)return;const p=JSON.parse(localStorage.getItem('pct6')||'{}');p[n]={t:{...S.toggles},s:{...S.sliders},se:{...S.selects},k:{...S.keybinds},fc:[...S.fan.curve],fp:S.fan.profile};localStorage.setItem('pct6',JSON.stringify(p));notify('‚úÖ "'+n+'" guardado','#10b981');render('profiles');}
function loadProf(n){const p=JSON.parse(localStorage.getItem('pct6')||'{}');if(!p[n])return;const d=p[n];Object.assign(S.toggles,d.t||{});Object.assign(S.sliders,d.s||{});Object.assign(S.selects,d.se||{});Object.assign(S.keybinds,d.k||{});if(d.fc)S.fan.curve=d.fc;if(d.fp)S.fan.profile=d.fp;notify('‚úÖ "'+n+'" cargado','#10b981');render(S.page);}
function delProf(n){const p=JSON.parse(localStorage.getItem('pct6')||'{}');delete p[n];localStorage.setItem('pct6',JSON.stringify(p));notify('üóëÔ∏è Eliminado','#ef4444');render('profiles');}
function expJSON(){dl('pctuner_config.json',JSON.stringify({toggles:S.toggles,sliders:S.sliders,selects:S.selects,keybinds:S.keybinds,fanCurve:S.fan.curve,fanProfile:S.fan.profile},null,2));}
function impJSON(ev){const f=ev.target.files[0];if(!f)return;const r=new FileReader();r.onload=e=>{try{const d=JSON.parse(e.target.result);Object.assign(S.toggles,d.toggles||{});Object.assign(S.sliders,d.sliders||{});Object.assign(S.selects,d.selects||{});Object.assign(S.keybinds,d.keybinds||{});if(d.fanCurve)S.fan.curve=d.fanCurve;if(d.fanProfile)S.fan.profile=d.fanProfile;notify('‚úÖ Importado','#10b981');render(S.page);}catch(e){notify('‚ùå Error','#ef4444');}};r.readAsText(f);}

// ===== MAKE APP =====
function pMakeApp(){return`${hdr('üì¶','Crear Aplicaci√≥n','Convierte PCTuner en app de escritorio')}<div class="card p-3.5 mb-4 border-l-2 border-l-indigo-500/30 fade-up"><div class="flex items-start gap-2"><span class="text-lg">üí°</span><div><h4 class="font-bold text-indigo-300 text-[11px] mb-0.5">¬øPor qu√© necesito esto?</h4><p class="text-[9px] text-slate-500 leading-relaxed">PCTuner es una app web. Para usarla como programa <strong class="text-white">.exe</strong> de escritorio, aqu√≠ tienes <strong class="text-indigo-400">3 m√©todos</strong>.</p></div></div></div>
${divider('M√©todo 1 ¬∑ Lo m√°s f√°cil')}
<div class="card p-4 mb-3 credit-card-anim hover-glow"><div class="flex items-center gap-2 mb-3"><div class="w-8 h-8 bg-gradient-to-br from-emerald-500/12 to-green-500/12 rounded-lg flex items-center justify-center text-lg border border-emerald-500/8">üöÄ</div><div><h4 class="font-bold text-white text-[12px]">Launcher .BAT</h4><p class="text-[8px] text-emerald-400 font-semibold">‚è± 30 seg ¬∑ Sin instalar nada</p></div></div><div class="space-y-2 mb-3"><div class="flex items-start gap-2"><span class="w-4 h-4 bg-indigo-500/12 rounded-full flex items-center justify-center text-[8px] font-black text-indigo-400 flex-shrink-0 mt-0.5">1</span><p class="text-[10px] text-slate-300">Crea carpeta <code class="mono text-amber-400 bg-slate-800/50 px-1 rounded text-[9px]">C:\\PCTuner</code></p></div><div class="flex items-start gap-2"><span class="w-4 h-4 bg-indigo-500/12 rounded-full flex items-center justify-center text-[8px] font-black text-indigo-400 flex-shrink-0 mt-0.5">2</span><p class="text-[10px] text-slate-300">Descarga los 2 archivos:</p></div></div><div class="flex gap-1.5 mb-3 flex-wrap"><button onclick="dlLauncher()" class="btn btn-success px-3 py-2 text-[10px]">‚¨á PCTuner.bat</button><button onclick="dlIndex()" class="btn btn-primary px-3 py-2 text-[10px]">‚¨á index.html</button></div><div class="flex items-start gap-2"><span class="w-4 h-4 bg-indigo-500/12 rounded-full flex items-center justify-center text-[8px] font-black text-indigo-400 flex-shrink-0 mt-0.5">3</span><p class="text-[10px] text-slate-300">Doble clic en <code class="mono text-amber-400 bg-slate-800/50 px-1 rounded text-[9px]">PCTuner.bat</code></p></div><div class="bg-emerald-500/4 border border-emerald-500/6 rounded-lg p-2 mt-2.5 flex items-center gap-1.5"><span class="text-sm">‚úÖ</span><p class="text-[8px] text-emerald-300/80">Se abre como ventana nativa sin barras de navegador</p></div></div>
${divider('M√©todo 2 ¬∑ .EXE real')}
<div class="card p-4 mb-3 credit-card-anim hover-glow" style="animation-delay:0.08s"><div class="flex items-center gap-2 mb-3"><div class="w-8 h-8 bg-gradient-to-br from-violet-500/12 to-purple-500/12 rounded-lg flex items-center justify-center text-lg border border-violet-500/8">‚ö°</div><div><h4 class="font-bold text-white text-[12px]">PowerShell .EXE</h4><p class="text-[8px] text-violet-400 font-semibold">‚è± 2 min ¬∑ Sin instalar nada</p></div></div><div class="flex gap-1.5 mb-3 flex-wrap"><button onclick="dlPS1Builder()" class="btn btn-violet px-3 py-2 text-[10px]">‚¨á Crear_EXE.ps1</button><button onclick="dlIndex()" class="btn btn-primary px-3 py-2 text-[10px]">‚¨á index.html</button></div><p class="text-[9px] text-slate-500">Clic derecho ‚Üí Ejecutar con PowerShell ‚Üí Genera <code class="mono text-emerald-400">PCTuner.exe</code></p></div>
${divider('M√©todo 3 ¬∑ Profesional')}
<div class="card p-4 mb-4 credit-card-anim hover-glow" style="animation-delay:0.16s"><div class="flex items-center gap-2 mb-3"><div class="w-8 h-8 bg-gradient-to-br from-amber-500/12 to-orange-500/12 rounded-lg flex items-center justify-center text-lg border border-amber-500/8">üñ•Ô∏è</div><div><h4 class="font-bold text-white text-[12px]">Electron</h4><p class="text-[8px] text-amber-400 font-semibold">‚è± 5 min ¬∑ Requiere Node.js</p></div></div><div class="flex gap-1.5 mb-3 flex-wrap"><button onclick="dlIndex()" class="btn btn-primary px-2.5 py-1.5 text-[9px]">‚¨á index.html</button><button onclick="dlElectronMain()" class="btn btn-amber px-2.5 py-1.5 text-[9px]">‚¨á main.js</button><button onclick="dlElectronPkg()" class="btn btn-amber px-2.5 py-1.5 text-[9px]">‚¨á package.json</button><button onclick="dlElectronInstall()" class="btn btn-success px-2.5 py-1.5 text-[9px]">‚¨á INSTALAR.bat</button></div><p class="text-[9px] text-slate-500">Doble clic en INSTALAR.bat ‚Üí App nativa completa</p></div>
<div class="card p-4 text-center border border-indigo-500/8 fade-up" style="background:linear-gradient(135deg,rgba(99,102,241,0.02),rgba(139,92,246,0.01))"><p class="text-xl mb-1">üéØ</p><h4 class="font-bold text-white text-[12px] mb-1">¬øCu√°l elijo?</h4><p class="text-[9px] text-slate-500 max-w-sm mx-auto mb-2.5">R√°pido ‚Üí <strong class="text-emerald-400">M√©todo 1</strong> ¬∑ Compartir ‚Üí <strong class="text-violet-400">M√©todo 2</strong> ¬∑ Pro ‚Üí <strong class="text-amber-400">M√©todo 3</strong></p><button onclick="dlLauncher();setTimeout(()=>dlIndex(),400)" class="btn btn-success px-5 py-2 text-[11px]">‚¨á Descargar Todo (M√©todo 1)</button></div>`;}

function dlLauncher(){const code='@echo off\ntitle PCTuner Pro v6\nset "DIR=%~dp0"\nset "FILE=%DIR%index.html"\nif not exist "%FILE%" (echo [ERROR] index.html no encontrado & pause & exit /b 1)\nwhere chrome >nul 2>&1 && (start "" chrome --app="file:///%FILE%" --window-size=1300,850 & exit)\nwhere msedge >nul 2>&1 && (start "" msedge --app="file:///%FILE%" --window-size=1300,850 & exit)\nif exist "C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe" (start "" "C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe" --app="file:///%FILE%" --window-size=1300,850 & exit)\nif exist "C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe" (start "" "C:\\Program Files (x86)\\Microsoft\\Edge\\Application\\msedge.exe" --app="file:///%FILE%" --window-size=1300,850 & exit)\nstart "" "%FILE%"';dl('PCTuner.bat',code);notify('‚¨á PCTuner.bat','#10b981');}
function dlIndex(){const b=new Blob(['<!DOCTYPE html>\n'+document.documentElement.outerHTML],{type:'text/html'});const u=URL.createObjectURL(b);const a=document.createElement('a');a.href=u;a.download='index.html';document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(u);notify('‚¨á index.html','#10b981');}
function dlPS1Builder(){dl('Crear_EXE.ps1','# PCTuner Pro v6 - Crear EXE\n$src=@"\nusing System;using System.Diagnostics;using System.IO;\nclass P{static void Main(){string d=AppDomain.CurrentDomain.BaseDirectory;string h=Path.Combine(d,"index.html");if(!File.Exists(h)){Console.WriteLine("index.html no encontrado");return;}string u="file:///"+h.Replace("\\\\","/");string[]b={"chrome","msedge"};foreach(var x in b){try{Process.Start(new ProcessStartInfo(x){{Arguments="--app=\\""+u+"\\" --window-size=1300,850",UseShellExecute=false}});return;}catch{}}Process.Start(h);}}\n"@\nAdd-Type -TypeDefinition $src -OutputAssembly (Join-Path $PSScriptRoot "PCTuner.exe") -OutputType ConsoleApplication\nWrite-Host "PCTuner.exe creado!" -FG Green\nRead-Host "Enter"');notify('‚¨á Crear_EXE.ps1','#10b981');}
function dlElectronMain(){dl('main.js','const{app,BrowserWindow}=require("electron");const path=require("path");function createWindow(){const w=new BrowserWindow({width:1300,height:850,title:"PCTuner Pro v6",backgroundColor:"#07090f",webPreferences:{nodeIntegration:false}});w.loadFile("index.html");w.setMenuBarVisibility(false);}app.whenReady().then(createWindow);app.on("window-all-closed",()=>{if(process.platform!=="darwin")app.quit();});');notify('‚¨á main.js','#10b981');}
function dlElectronPkg(){dl('package.json',JSON.stringify({name:"pctuner-pro",version:"6.0.0",main:"main.js",scripts:{start:"electron .",build:"electron-builder --win"},devDependencies:{electron:"^28.0.0","electron-builder":"^24.0.0"},build:{appId:"com.mueblesito.pctuner",win:{target:["nsis","portable"]}}},null,2));notify('‚¨á package.json','#10b981');}
function dlElectronInstall(){dl('INSTALAR.bat','@echo off\ntitle PCTuner Installer\nwhere node >nul 2>&1 || (echo Node.js no instalado! & pause & exit /b 1)\necho Instalando...\ncall npm install\necho Iniciando...\ncall npm start\npause');notify('‚¨á INSTALAR.bat','#10b981');}

// ===== ABOUT =====
function pAbout(){return`${hdr('‚ÑπÔ∏è','Acerca de','PCTuner Pro v6')}<div class="card p-5 text-center mb-3"><div class="w-14 h-14 bg-gradient-to-br from-indigo-500 to-violet-600 rounded-2xl flex items-center justify-center text-xl font-black text-white mx-auto mb-2.5 shadow-xl shadow-indigo-500/15">PC</div><h2 class="text-lg font-black text-white">PCTuner Pro v6.0</h2><p class="text-[11px] text-slate-400 mt-0.5">Optimizador Universal</p><p class="text-[10px] mt-1.5">por <span class="credit-gradient font-bold cursor-pointer" onclick="go('credits')">mueblesito</span> ‚ú®</p></div><div class="card p-4 mb-3"><h4 class="font-bold text-white text-[11px] mb-2">üñ•Ô∏è Hardware Detectado</h4><div class="grid grid-cols-2 md:grid-cols-3 gap-1.5 text-[9px]">${[['Marca',S.hw.brand],['SO',(S.hw.osVer?'Win '+S.hw.osVer:S.hw.os)],['Arch',S.hw.arch],['Cores',S.hw.cores],['RAM',S.hw.ram?S.hw.ram+'GB':'N/A'],['GPU',S.hw.gpu?S.hw.gpu.substring(0,25):'N/A'],['Pantalla',S.hw.screenW+'√ó'+S.hw.screenH],['Touch',S.hw.touch?'S√≠':'No'],['Bater√≠a',S.hw.battery?S.hw.batteryLevel+'%':'No']].map(([k,v])=>`<div class="stat p-2"><span class="text-slate-600 text-[8px]">${k}</span><p class="text-white font-medium mt-0.5">${v}</p></div>`).join('')}</div></div><div class="card p-3 border-l-2 border-l-emerald-500/30"><p class="text-[9px] text-emerald-300/70">üõ°Ô∏è <strong>Defender nunca se modifica.</strong></p></div>`;}

// ===== CREDITS =====
function pCredits(){const stars=Array.from({length:12},()=>`<div class="star" style="top:${Math.random()*100}%;left:${Math.random()*100}%;animation-delay:${Math.random()*3}s"></div>`).join('');const buildDate=new Date().toLocaleDateString('es-ES',{year:'numeric',month:'long',day:'numeric'});
return`<div class="relative" style="min-height:60vh"><div class="orb orb-1"></div><div class="orb orb-2"></div>${stars}
<div class="card p-6 md:p-8 text-center mb-5 hover-glow credit-card-anim" style="background:linear-gradient(135deg,rgba(12,15,24,0.95),rgba(16,12,30,0.9))"><div class="credit-avatar w-18 h-18 md:w-20 md:h-20 bg-gradient-to-br from-indigo-500 via-violet-500 to-pink-500 rounded-2xl flex items-center justify-center text-2xl md:text-3xl font-black text-white mx-auto mb-4 shadow-2xl shadow-indigo-500/15" style="width:72px;height:72px">ü™ë</div><h2 class="text-xl md:text-2xl font-black credit-gradient mb-1">mueblesito</h2><p class="text-slate-400 text-[11px] font-medium">Creador & Desarrollador</p><div class="flex items-center justify-center gap-1 mt-1.5"><span class="w-1.5 h-1.5 bg-emerald-400 rounded-full pulse-anim"></span><span class="text-[9px] text-emerald-400 font-semibold">Activo</span></div><p class="text-[9px] text-slate-500 mt-3 max-w-sm mx-auto leading-relaxed">Dise√±√© <strong class="text-indigo-400">PCTuner Pro v6</strong> para hacer la optimizaci√≥n de PC accesible para todos. üõ°Ô∏è</p></div>
<div class="grid grid-cols-2 md:grid-cols-4 gap-2 mb-5">${[['‚ú®','v6.0','Versi√≥n','indigo'],['‚ö°','22','Secciones','violet'],['üîß','140+','Opciones','pink'],['üõ°Ô∏è','100%','Defender Safe','emerald']].map(([ic,val,label,col],i)=>`<div class="card p-3 text-center hover-glow credit-card-anim" style="animation-delay:${0.06+i*0.05}s"><p class="text-lg mb-0.5">${ic}</p><p class="text-base font-black text-${col}-400">${val}</p><p class="text-[8px] text-slate-600 font-medium">${label}</p></div>`).join('')}</div>
<div class="grid md:grid-cols-2 gap-3 mb-5"><div class="card p-4 hover-glow credit-card-anim" style="animation-delay:0.12s"><h4 class="font-bold text-white text-[11px] mb-2 flex items-center gap-1">üí° Filosof√≠a</h4><div class="space-y-2">${[['üéØ','Simplicidad','Interfaz intuitiva'],['üõ°Ô∏è','Seguridad','Defender intacto'],['üîç','Transparencia','C√≥digo visible'],['üåç','Universal','Cualquier hardware'],['‚ö°','Eficiencia','Scripts optimizados']].map(([ic,t,d])=>`<div class="flex items-start gap-2"><span class="text-sm">${ic}</span><div><p class="text-[9px] font-bold text-white">${t}</p><p class="text-[8px] text-slate-600">${d}</p></div></div>`).join('')}</div></div><div class="card p-4 hover-glow credit-card-anim" style="animation-delay:0.16s"><h4 class="font-bold text-white text-[11px] mb-2 flex items-center gap-1">üõ†Ô∏è Stack</h4><div class="flex flex-wrap gap-1 mb-3">${[['HTML5','#e34f26'],['CSS3','#1572b6'],['JavaScript','#f7df1e'],['Tailwind','#06b6d4'],['Canvas','#8b5cf6'],['Batch','#4d4d4d'],['PowerShell','#012456'],['Registry','#cc6699'],['AHK','#334455']].map(([n,c])=>`<span class="tech-badge" style="color:${c};border-color:${c}20;background:${c}05">${n}</span>`).join('')}</div><div class="stat p-2 text-center"><p class="text-[7px] text-slate-700 mb-0.5">L√≠neas de c√≥digo</p><p class="text-sm font-black text-indigo-400 mono">~3,800+</p></div></div></div>
<div class="card p-4 mb-5 hover-glow credit-card-anim" style="animation-delay:0.2s"><h4 class="font-bold text-white text-[11px] mb-3 flex items-center gap-1">üìÖ Evoluci√≥n</h4><div class="relative ml-0.5"><div class="timeline-line"></div><div class="space-y-3">${[['v1','Script .bat','Lenovo IdeaPad'],['v2','P√°gina web','Interfaz visual'],['v3','Sistema completo','Dashboard + keybinds'],['v4','Hardware detect','Auto-detecta todo'],['v5','App universal','Cualquier PC'],['v6','Edici√≥n Pro','UI premium ¬∑ 140+ opciones']].map(([v,t,d])=>`<div class="flex items-start gap-2.5"><div class="timeline-dot mt-0.5"></div><div class="flex-1"><div class="flex items-center gap-1 mb-0.5"><span class="text-[8px] font-bold text-indigo-400 mono bg-indigo-500/6 px-1.5 py-0.5 rounded-full">${v}</span><span class="font-bold text-white text-[10px]">${t}</span></div><p class="text-[8px] text-slate-600">${d}</p></div></div>`).join('')}</div></div></div>
<div class="card p-5 text-center hover-glow credit-card-anim" style="animation-delay:0.25s;background:linear-gradient(135deg,rgba(12,15,24,0.9),rgba(16,12,30,0.85))"><p class="text-xl mb-1.5">ü™ë‚ú®</p><p class="text-[11px] text-slate-300 mb-0.5">Creado con <span class="text-red-400">‚ù§Ô∏è</span> por</p><h3 class="text-lg font-black credit-gradient mb-1.5">mueblesito</h3><p class="text-[9px] text-slate-600 max-w-xs mx-auto leading-relaxed mb-3">Cada PC merece correr a su m√°ximo potencial. üöÄ</p><div class="flex items-center justify-center gap-1.5 flex-wrap"><div class="stat px-2.5 py-1 flex items-center gap-1"><span class="text-[9px]">üìÖ</span><span class="text-[8px] text-slate-500">${buildDate}</span></div><div class="stat px-2.5 py-1 flex items-center gap-1"><span class="text-[9px]">üíª</span><span class="text-[8px] text-slate-500">${S.hw.brand}</span></div><div class="stat px-2.5 py-1 flex items-center gap-1"><span class="text-[9px]">üõ°Ô∏è</span><span class="text-[8px] text-emerald-400 font-semibold">Defender OK</span></div></div></div>
<p class="text-center mt-5 text-[8px] text-slate-800 tracking-widest uppercase font-bold">PCTuner Pro v6.0 ¬∑ mueblesito ¬© ${new Date().getFullYear()}</p></div>`;}

// ===== PRESETS =====
function applyPreset(p){Object.keys(S.toggles).forEach(k=>S.toggles[k]=false);const pr={balanced:['p_sysmain','p_indexing','p_visual','p_transparency','p_startup_delay','p_menu_delay','p_tips','p_cpu_priority','p_ntfs_last','c_temp','c_recycle','c_dns','n_flush','n_qos','pw_high','pw_hibernate','pr_telemetry','pr_cortana','pr_ad_id','pr_feedback','pr_suggestions','t_search','t_taskview','t_widgets','t_chat','t_copilot','e_ext','e_thispc','e_no_recent','v_dark','v_dark_apps','sv_diagtrack','sv_dmwap','m_restore','b_onedrive','b_teams','s_no_startup','wu_no_restart','sec_autoplay','g_mode'],max:['p_sysmain','p_prefetch','p_indexing','p_visual','p_transparency','p_startup_delay','p_menu_delay','p_tips','p_cpu_priority','p_ntfs_last','p_core_parking','p_timer_res','c_temp','c_recycle','c_update','c_thumb','c_logs','c_dns','c_bloatware','c_delivery','c_error','n_flush','n_nagle','n_qos','pw_high','pw_hibernate','pw_usb','pw_disk','pw_cpu_max','pr_telemetry','pr_cortana','pr_activity','pr_ad_id','pr_feedback','pr_suggestions','pr_lockscreen','t_search','t_taskview','t_widgets','t_chat','t_copilot','v_dark','v_dark_apps','v_no_anim','v_no_trans','v_no_shadow','sv_diagtrack','sv_dmwap','sv_sysmain','sv_wsearch','sv_xbox','sv_maps','sv_fax','sv_remote','sv_phone','sv_retail','sv_wallet','g_mode','g_dvr','g_fullscreen','g_mouse','g_nagle','g_throttle','g_xbox','g_notif','e_ext','e_thispc','e_classic','e_compact','e_no_ads','m_sfc','m_dism','m_defrag','m_restore','b_onedrive','b_teams','b_edge','b_skype','b_cortana','b_adobe','s_no_startup','wu_no_restart','wu_no_peer','sec_autoplay','sec_smb1'],privacy:['pr_telemetry','pr_cortana','pr_activity','pr_ad_id','pr_location','pr_diag','pr_feedback','pr_suggestions','pr_lockscreen','pr_timeline','pr_clipboard','pr_input','sv_diagtrack','sv_dmwap','t_widgets','t_chat','t_copilot','wu_no_peer','sec_autoplay','sec_wpad','m_restore'],silent:['fan_smart','pw_high','m_restore','p_visual','p_transparency','v_no_anim'],battery:['p_sysmain','p_visual','p_transparency','p_indexing','v_no_anim','v_no_trans','pw_hibernate','sv_wsearch','sv_xbox','sv_maps','fan_smart','m_restore','b_onedrive','b_teams','b_spotify','b_edge','t_widgets']};if(pr[p])pr[p].forEach(k=>{S.toggles[k]=true;track(k,true);});if(p==='silent'){S.fan.profile='silent';S.fan.curve=[{t:30,s:8},{t:45,s:18},{t:60,s:30},{t:75,s:50},{t:90,s:65}];}render(S.page);const nm={balanced:'Equilibrado',max:'M√°x Rendimiento',privacy:'Privacidad',silent:'Silencioso',battery:'Ahorro Bater√≠a'};notify('‚úÖ Preset "'+nm[p]+'"','#10b981');}

function notify(msg,bg='#6366f1'){const s=document.getElementById('notifStack');const d=document.createElement('div');d.className='notif';d.style.background=bg;d.textContent=msg;s.appendChild(d);setTimeout(()=>{d.style.animation='fadeOut 0.2s ease forwards';setTimeout(()=>d.remove(),200);},2500);}

// ===== EXEC =====
function openExec(){document.getElementById('execModal').classList.remove('hidden');renderExec();}
function closeExec(){document.getElementById('execModal').classList.add('hidden');}
function renderExec(){const a=Object.entries(S.toggles).filter(([,v])=>v);const b=document.getElementById('execBody');if(!a.length){b.innerHTML=`<div class="text-center py-6"><p class="text-2xl mb-1">‚ö°</p><p class="text-[11px] text-slate-400">Sin optimizaciones activas.</p><p class="text-[9px] text-slate-600 mt-0.5">Usa un Preset o activa opciones.</p></div>`;return;}b.innerHTML=`<div class="mb-3"><p class="font-bold text-white text-sm">${a.length} activas</p><p class="text-[9px] text-slate-500">${S.hw.brand} ¬∑ ${S.hw.osVer?'Win '+S.hw.osVer:S.hw.os}</p></div><div class="card p-2 mb-3 border-l-2 border-l-emerald-500/30"><p class="text-[9px] text-emerald-200/70">üõ°Ô∏è Defender <strong>NO se modifica</strong></p></div><div class="space-y-0.5 mb-4 max-h-[120px] overflow-y-auto pr-1">${a.map(([k])=>`<div class="flex items-center gap-1 text-[9px]"><span class="text-emerald-400">‚úì</span><span class="text-slate-400 mono">${k}</span></div>`).join('')}</div><div class="grid grid-cols-2 gap-2"><button onclick="execDl('bat')" class="btn btn-success py-2.5 flex flex-col items-center gap-0.5"><span class="text-base">‚ö°</span><span class="text-[10px]">.BAT</span></button><button onclick="execDl('ps1')" class="btn btn-primary py-2.5 flex flex-col items-center gap-0.5"><span class="text-base">üî∑</span><span class="text-[10px]">.PS1</span></button><button onclick="execDl('reg')" class="btn btn-violet py-2.5 flex flex-col items-center gap-0.5"><span class="text-base">üóùÔ∏è</span><span class="text-[10px]">.REG</span></button><button onclick="execDl('ahk')" class="btn btn-amber py-2.5 flex flex-col items-center gap-0.5"><span class="text-base">‚å®Ô∏è</span><span class="text-[10px]">.AHK</span></button></div><p class="text-center text-[8px] text-slate-600 mt-2">Ejecuta como <strong class="text-white">Admin</strong></p>`;}
function execDl(f){const g={bat:genBAT,ps1:genPS1,reg:genREG,ahk:genAHK},x={bat:'.bat',ps1:'.ps1',reg:'.reg',ahk:'.ahk'};dl('PCTuner_'+S.hw.brand.replace(/\s/g,'')+'_'+f.toUpperCase()+x[f],g[f]());notify('‚¨á Descargado','#10b981');closeExec();}

function openExport(){document.getElementById('exportModal').classList.remove('hidden');}
function closeExport(){document.getElementById('exportModal').classList.add('hidden');}
function genScript(){const f=document.getElementById('expFmt').value,g={bat:genBAT,ps1:genPS1,reg:genREG,ahk:genAHK},x={bat:'.bat',ps1:'.ps1',reg:'.reg',ahk:'.ahk'};_code=g[f]();_fn='PCTuner_'+S.hw.brand.replace(/\s/g,'')+x[f];document.getElementById('expTitle').textContent=_fn;document.getElementById('expBody').innerHTML=`<pre class="p-3 text-[9px] text-emerald-400 mono leading-relaxed">${esc(_code)}</pre>`;document.getElementById('expFoot').classList.remove('hidden');document.getElementById('expInfo').textContent=_code.split('\n').length+' l√≠neas ¬∑ '+(new Blob([_code]).size/1024).toFixed(1)+' KB';}
function esc(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}
function copyCode(){navigator.clipboard.writeText(_code).then(()=>{const b=document.getElementById('copyBtn');b.textContent='‚úÖ Copiado';setTimeout(()=>b.textContent='üìã Copiar',1200);});}
function dlCode(){dl(_fn,_code);}
function dl(n,c){const b=new Blob([c],{type:'text/plain'}),u=URL.createObjectURL(b),a=document.createElement('a');a.href=u;a.download=n;document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(u);}

// ===== SCRIPT GENERATORS =====
function genBAT(){const h=S.hw;let s=`@echo off\nchcp 65001 >nul\ntitle PCTUNER PRO v6 ‚Äî ${h.brand}\ncolor 0A\necho.\necho  PCTUNER PRO v6 ‚Äî ${h.brand}\necho  Defender: INTACTO\necho.\nnet session >nul 2>&1\nif %errorlevel% neq 0 (echo [!] Ejecuta como ADMIN & pause & exit /b 1)\necho [OK] Admin\n\n`;if(T('m_restore'))s+=`PowerShell -Command "Checkpoint-Computer -Description 'PCTuner_v6' -RestorePointType 'MODIFY_SETTINGS'" 2>nul\n`;if(T('p_sysmain'))s+=`sc config "SysMain" start= disabled >nul 2>&1 & sc stop "SysMain" >nul 2>&1\n`;if(T('p_prefetch'))s+=`reg add "HKLM\\SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Memory Management\\PrefetchParameters" /v EnablePrefetcher /t REG_DWORD /d 0 /f >nul\n`;if(T('p_indexing'))s+=`sc config "WSearch" start= disabled >nul 2>&1 & sc stop "WSearch" >nul 2>&1\n`;if(T('p_visual'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\VisualEffects" /v VisualFXSetting /t REG_DWORD /d 2 /f >nul\n`;if(T('p_transparency'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Themes\\Personalize" /v EnableTransparency /t REG_DWORD /d 0 /f >nul\n`;if(T('p_startup_delay'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Serialize" /v StartupDelayInMSec /t REG_DWORD /d 0 /f >nul\n`;if(T('p_menu_delay'))s+=`reg add "HKCU\\Control Panel\\Desktop" /v MenuShowDelay /t REG_SZ /d "20" /f >nul\n`;if(T('p_cpu_priority'))s+=`reg add "HKLM\\SYSTEM\\CurrentControlSet\\Control\\PriorityControl" /v Win32PrioritySeparation /t REG_DWORD /d 38 /f >nul\n`;if(T('p_ntfs_last'))s+=`fsutil behavior set disablelastaccess 1 >nul\n`;if(T('p_core_parking'))s+=`powercfg -setacvalueindex SCHEME_CURRENT SUB_PROCESSOR CPMINCORES 100 >nul 2>&1\n`;if(T('c_temp'))s+=`del /q /f /s "%TEMP%\\*" 2>nul\ndel /q /f /s "C:\\Windows\\Temp\\*" 2>nul\n`;if(T('c_recycle'))s+=`rd /s /q C:\\$Recycle.Bin 2>nul\n`;if(T('c_dns'))s+=`ipconfig /flushdns >nul\n`;if(T('c_bloatware'))s+=`PowerShell -Command "Get-AppxPackage *3dbuilder*,*solitaire*,*bingnews*,*bingweather*,*zunevideo*,*xboxapp*,*officehub*,*skypeapp*,*windowsmaps*,*clipchamp*,*people*,*feedback* | Remove-AppxPackage -EA SilentlyContinue" 2>nul\n`;if(T('n_flush'))s+=`ipconfig /flushdns >nul & ipconfig /registerdns >nul\n`;if(T('n_winsock'))s+=`netsh winsock reset >nul\n`;if(T('n_tcpip'))s+=`netsh int ip reset >nul\n`;if(T('n_nagle'))s+=`reg add "HKLM\\SOFTWARE\\Microsoft\\MSMQ\\Parameters" /v TCPNoDelay /t REG_DWORD /d 1 /f >nul\n`;if(T('n_autotuning'))s+=`netsh int tcp set global autotuninglevel=disabled >nul\n`;const dm={google:['8.8.8.8','8.8.4.4'],cloudflare:['1.1.1.1','1.0.0.1'],quad9:['9.9.9.9','149.112.112.112']},dns=SE('n_dns')||'cloudflare',adp=SE('n_adapter')==='ethernet'?'Ethernet':'Wi-Fi';if(dns!=='default'&&dm[dns])s+=`netsh interface ip set dns "${adp}" static ${dm[dns][0]} primary >nul\nnetsh interface ip add dns "${adp}" ${dm[dns][1]} index=2 >nul\n`;if(T('pw_high'))s+=`powercfg /setactive 8c5e7fda-e8bf-4a96-9a85-a6e23a8c635c >nul 2>&1\n`;if(T('pw_hibernate'))s+=`powercfg /hibernate off >nul\n`;if(T('pr_telemetry'))s+=`reg add "HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\DataCollection" /v AllowTelemetry /t REG_DWORD /d 0 /f >nul\nsc config "DiagTrack" start= disabled >nul 2>&1\n`;if(T('pr_cortana'))s+=`reg add "HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\Windows Search" /v AllowCortana /t REG_DWORD /d 0 /f >nul\n`;if(T('pr_ad_id'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\AdvertisingInfo" /v Enabled /t REG_DWORD /d 0 /f >nul\n`;if(T('t_search'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Search" /v SearchboxTaskbarMode /t REG_DWORD /d 0 /f >nul\n`;if(T('t_widgets'))s+=`reg add "HKLM\\SOFTWARE\\Policies\\Microsoft\\Dsh" /v AllowNewsAndInterests /t REG_DWORD /d 0 /f >nul\n`;if(T('t_copilot'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Advanced" /v ShowCopilotButton /t REG_DWORD /d 0 /f >nul\n`;if(SE('t_align')==='left')s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Advanced" /v TaskbarAl /t REG_DWORD /d 0 /f >nul\n`;if(T('v_dark'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Themes\\Personalize" /v SystemUsesLightTheme /t REG_DWORD /d 0 /f >nul\n`;if(T('v_dark_apps'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Themes\\Personalize" /v AppsUseLightTheme /t REG_DWORD /d 0 /f >nul\n`;if(T('e_ext'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Advanced" /v HideFileExt /t REG_DWORD /d 0 /f >nul\n`;if(T('e_classic'))s+=`reg add "HKCU\\Software\\Classes\\CLSID\\{86ca1aa0-34aa-4e8b-a509-50c905bae2a2}\\InprocServer32" /f /ve >nul 2>&1\n`;if(T('g_dvr'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\GameDVR" /v AppCaptureEnabled /t REG_DWORD /d 0 /f >nul\n`;if(T('g_xbox'))s+=`reg add "HKCU\\Software\\Microsoft\\GameBar" /v UseNexusForGameBarEnabled /t REG_DWORD /d 0 /f >nul\n`;if(T('sv_diagtrack'))s+=`sc config "DiagTrack" start= disabled >nul 2>&1\n`;if(T('sv_dmwap'))s+=`sc config "dmwappushservice" start= disabled >nul 2>&1\n`;if(T('sv_xbox'))s+=`sc config "XblAuthManager" start= disabled >nul 2>&1\n`;if(T('sv_fax'))s+=`sc config "Fax" start= disabled >nul 2>&1\n`;if(T('sv_maps'))s+=`sc config "MapsBroker" start= disabled >nul 2>&1\n`;if(T('sec_autoplay'))s+=`reg add "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\AutoplayHandlers" /v DisableAutoplay /t REG_DWORD /d 1 /f >nul\n`;if(T('sec_smb1'))s+=`PowerShell -Command "Disable-WindowsOptionalFeature -Online -FeatureName SMB1Protocol -NoRestart" >nul 2>&1\n`;if(T('m_dism'))s+=`DISM /Online /Cleanup-Image /RestoreHealth\n`;if(T('m_sfc'))s+=`sfc /scannow\n`;if(T('m_defrag'))s+=`defrag C: /O\n`;if(T('b_onedrive'))s+=`reg delete "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Run" /v OneDrive /f >nul 2>&1\n`;if(T('wu_no_restart'))s+=`reg add "HKLM\\SOFTWARE\\Policies\\Microsoft\\Windows\\WindowsUpdate\\AU" /v NoAutoRebootWithLoggedOnUsers /t REG_DWORD /d 1 /f >nul\n`;s+=`\necho.\necho  COMPLETADO ¬∑ Defender INTACTO\necho.\nset /p r="Reiniciar? (S/N): "\nif /i "%r%"=="S" (shutdown /r /t 10 /c "PCTuner Pro v6")\npause\n`;return s;}
function genPS1(){let s=`# PCTuner Pro v6 ‚Äî ${S.hw.brand}\n# Defender: INTACTO\nif(-NOT([Security.Principal.WindowsPrincipal][Security.Principal.WindowsIdentity]::GetCurrent()).IsInRole([Security.Principal.WindowsBuiltInRole]"Administrator")){Write-Host "[!] Admin requerido" -FG Red;exit}\n`;if(T('m_restore'))s+=`Checkpoint-Computer -Description "PCTuner_v6" -RestorePointType "MODIFY_SETTINGS" -EA SilentlyContinue\n`;if(T('p_sysmain'))s+=`Stop-Service "SysMain" -Force -EA SilentlyContinue;Set-Service "SysMain" -StartupType Disabled\n`;if(T('pr_telemetry'))s+=`Set-ItemProperty "HKLM:\\SOFTWARE\\Policies\\Microsoft\\Windows\\DataCollection" -Name "AllowTelemetry" -Value 0 -Type DWord -Force\n`;if(T('c_temp'))s+=`Remove-Item "$env:TEMP\\*" -Recurse -Force -EA SilentlyContinue\n`;s+=`Write-Host "Completado. Defender: NO MODIFICADO" -FG Green\nRead-Host "Enter"\n`;return s;}
function genREG(){let s=`Windows Registry Editor Version 5.00\n; PCTuner Pro v6 ‚Äî ${S.hw.brand}\n; Defender NO se modifica\n\n`;if(T('v_dark'))s+=`[HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Themes\\Personalize]\n"SystemUsesLightTheme"=dword:00000000\n\n`;if(T('pr_telemetry'))s+=`[HKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Microsoft\\Windows\\DataCollection]\n"AllowTelemetry"=dword:00000000\n\n`;if(T('e_ext'))s+=`[HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Advanced]\n"HideFileExt"=dword:00000000\n\n`;return s;}
function genAHK(){let s=`; PCTuner Pro v6 ‚Äî ${S.hw.brand}\n#Requires AutoHotkey v2.0\n#SingleInstance Force\n\n`;const m={k_screenshot:'Send "{PrintScreen}"',k_taskmgr:'Run "taskmgr.exe"',k_run:'Send "#r"',k_explorer:'Run "explorer.exe"',k_cmd:'Run "*RunAs cmd.exe"',k_desktop:'Send "#d"',k_vol_up:'Send "{Volume_Up}"',k_vol_down:'Send "{Volume_Down}"',k_mute:'Send "{Volume_Mute}"',k_play:'Send "{Media_Play_Pause}"',k_calc:'Run "calc.exe"',k_notepad:'Run "notepad.exe"',k_lock:'DllCall("LockWorkStation")',k_browser:'Run "msedge.exe"',k_close:'Send "!{F4}"',k_minimize:'Send "#m"'};Object.entries(S.keybinds).forEach(([id,combo])=>{const a=m[id];if(!a)return;let h=combo.replace(/Ctrl/g,'^').replace(/Alt/g,'!').replace(/Shift/g,'+').replace(/Win/g,'#').replace(/ \+ /g,'');h=h.replace(/([A-Z])$/,x=>x.toLowerCase());s+=`${h}:: {\n    ${a}\n}\n\n`;});return s;}

// ===== PARTICLES =====
function initParticles(){const c=document.getElementById('particles');if(!c)return;setInterval(()=>{if(document.hidden)return;const p=document.createElement('div');p.className='particle';const sz=Math.random()*2+0.5,x=Math.random()*100,dur=Math.random()*8+5;p.style.cssText=`width:${sz}px;height:${sz}px;left:${x}%;bottom:-10px;background:rgba(99,102,241,${Math.random()*0.15+0.05});animation:floatUp ${dur}s ease-out forwards`;c.appendChild(p);setTimeout(()=>p.remove(),(dur+1)*1000);},1200);}

function updClock(){const n=new Date(),h=n.getHours().toString().padStart(2,'0'),m=n.getMinutes().toString().padStart(2,'0'),s=n.getSeconds().toString().padStart(2,'0');const el=document.getElementById('clock');if(el)el.textContent=h+':'+m+':'+s;}

// RIPPLE
document.addEventListener('click',e=>{const t=e.target.closest('.btn,.preset-btn,.nav-btn,.qa-btn');if(!t)return;const r=document.createElement('span');r.className='ripple';const rect=t.getBoundingClientRect(),sz=Math.max(rect.width,rect.height)*2;r.style.width=r.style.height=sz+'px';r.style.left=(e.clientX-rect.left-sz/2)+'px';r.style.top=(e.clientY-rect.top-sz/2)+'px';t.style.position=t.style.position||'relative';t.style.overflow='hidden';t.appendChild(r);setTimeout(()=>r.remove(),450);});

function calcScore(){const a=Object.values(S.toggles).filter(v=>v).length,t=Object.keys(S.toggles).length;if(!t)return 50;return Math.min(99,Math.round(40+a/t*59));}
function updScore(){const s=calcScore();const el=document.getElementById('scoreVal');if(el)el.textContent=s;const ring=document.getElementById('scoreRing');if(ring){const circ=2*Math.PI*14,off=circ-(s/100)*circ;ring.setAttribute('stroke-dashoffset',off);ring.setAttribute('stroke',s>=75?'#10b981':s>=50?'#f59e0b':'#ef4444');}document.getElementById('perfScore')?.classList.remove('hidden');}
function updStatusBar(){const hw=document.getElementById('sbHw');if(hw)hw.textContent=S.hw.brand+' ¬∑ '+(S.hw.osVer?'Win '+S.hw.osVer:S.hw.os)+' ¬∑ '+S.hw.cores+'C'+(S.hw.ram?' ¬∑ '+S.hw.ram+'GB':'');const ch=document.getElementById('sbChanges');if(ch)ch.textContent=cCount+' cambios';}
function hideLoader(){const l=document.getElementById('loaderScreen');if(l){l.classList.add('hide');setTimeout(()=>l.remove(),400);}}

// KEYBOARD
document.addEventListener('keydown',e=>{if(_recId)return;if((e.ctrlKey||e.metaKey)&&e.key==='k'){e.preventDefault();openSearch();}if(e.key==='Escape'){closeExec();closeExport();closeSearch();}});

async function init(){buildNav();buildSearchIndex();await detectHW();updClock();setInterval(updClock,1000);initParticles();go('dashboard');simMon();setInterval(simMon,2500);updScore();updStatusBar();setTimeout(hideLoader,600);}
init();
window.addEventListener('resize',()=>{if(S.page==='fans')initFanCanvas();});
</script>
</body>
</html>
